{"ast":null,"code":"import { getFormatMixins, isFieldOrDatumDef, isValueDef } from '../../../channeldef';\nimport { signalOrValueRef } from '../../common';\nimport { formatSignalRef } from '../../format';\nimport { wrapCondition } from './conditional';\nexport function text(model) {\n  let channel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'text';\n  const channelDef = model.encoding[channel];\n  return wrapCondition({\n    model,\n    channelDef,\n    vgChannel: channel,\n    mainRefFn: cDef => textRef(cDef, model.config),\n    invalidValueRef: undefined // text encoding doesn't have continuous scales and thus can't have invalid values\n  });\n}\nexport function textRef(channelDef, config) {\n  let expr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'datum';\n  // text\n  if (channelDef) {\n    if (isValueDef(channelDef)) {\n      return signalOrValueRef(channelDef.value);\n    }\n    if (isFieldOrDatumDef(channelDef)) {\n      const {\n        format,\n        formatType\n      } = getFormatMixins(channelDef);\n      return formatSignalRef({\n        fieldOrDatumDef: channelDef,\n        format,\n        formatType,\n        expr,\n        config\n      });\n    }\n  }\n  return undefined;\n}","map":{"version":3,"names":["getFormatMixins","isFieldOrDatumDef","isValueDef","signalOrValueRef","formatSignalRef","wrapCondition","text","model","channel","arguments","length","undefined","channelDef","encoding","vgChannel","mainRefFn","cDef","textRef","config","invalidValueRef","expr","value","format","formatType","fieldOrDatumDef"],"sources":["C:\\Users\\sutul\\node_modules\\vega-lite\\src\\compile\\mark\\encode\\text.ts"],"sourcesContent":["import {getFormatMixins, isFieldOrDatumDef, isValueDef} from '../../../channeldef';\nimport {Config} from '../../../config';\nimport {Encoding} from '../../../encoding';\nimport {VgValueRef} from '../../../vega.schema';\nimport {signalOrValueRef} from '../../common';\nimport {formatSignalRef} from '../../format';\nimport {UnitModel} from '../../unit';\nimport {wrapCondition} from './conditional';\n\nexport function text(model: UnitModel, channel: 'text' | 'href' | 'url' | 'description' = 'text') {\n  const channelDef = model.encoding[channel];\n  return wrapCondition({\n    model,\n    channelDef,\n    vgChannel: channel,\n    mainRefFn: cDef => textRef(cDef, model.config),\n    invalidValueRef: undefined // text encoding doesn't have continuous scales and thus can't have invalid values\n  });\n}\n\nexport function textRef(\n  channelDef: Encoding<string>['text' | 'tooltip'],\n  config: Config,\n  expr: 'datum' | 'datum.datum' = 'datum'\n): VgValueRef {\n  // text\n  if (channelDef) {\n    if (isValueDef(channelDef)) {\n      return signalOrValueRef(channelDef.value);\n    }\n    if (isFieldOrDatumDef(channelDef)) {\n      const {format, formatType} = getFormatMixins(channelDef);\n      return formatSignalRef({fieldOrDatumDef: channelDef, format, formatType, expr, config});\n    }\n  }\n  return undefined;\n}\n"],"mappings":"AAAA,SAAQA,eAAe,EAAEC,iBAAiB,EAAEC,UAAU,QAAO,qBAAqB;AAIlF,SAAQC,gBAAgB,QAAO,cAAc;AAC7C,SAAQC,eAAe,QAAO,cAAc;AAE5C,SAAQC,aAAa,QAAO,eAAe;AAE3C,OAAM,SAAUC,IAAIA,CAACC,KAAgB,EAA2D;EAAA,IAAzDC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAmD,MAAM;EAC9F,MAAMG,UAAU,GAAGL,KAAK,CAACM,QAAQ,CAACL,OAAO,CAAC;EAC1C,OAAOH,aAAa,CAAC;IACnBE,KAAK;IACLK,UAAU;IACVE,SAAS,EAAEN,OAAO;IAClBO,SAAS,EAAEC,IAAI,IAAIC,OAAO,CAACD,IAAI,EAAET,KAAK,CAACW,MAAM,CAAC;IAC9CC,eAAe,EAAER,SAAS,CAAC;GAC5B,CAAC;AACJ;AAEA,OAAM,SAAUM,OAAOA,CACrBL,UAAgD,EAChDM,MAAc,EACyB;EAAA,IAAvCE,IAAA,GAAAX,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAgC,OAAO;EAEvC;EACA,IAAIG,UAAU,EAAE;IACd,IAAIV,UAAU,CAACU,UAAU,CAAC,EAAE;MAC1B,OAAOT,gBAAgB,CAACS,UAAU,CAACS,KAAK,CAAC;IAC3C;IACA,IAAIpB,iBAAiB,CAACW,UAAU,CAAC,EAAE;MACjC,MAAM;QAACU,MAAM;QAAEC;MAAU,CAAC,GAAGvB,eAAe,CAACY,UAAU,CAAC;MACxD,OAAOR,eAAe,CAAC;QAACoB,eAAe,EAAEZ,UAAU;QAAEU,MAAM;QAAEC,UAAU;QAAEH,IAAI;QAAEF;MAAM,CAAC,CAAC;IACzF;EACF;EACA,OAAOP,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}