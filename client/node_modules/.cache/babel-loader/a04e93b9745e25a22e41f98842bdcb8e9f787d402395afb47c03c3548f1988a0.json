{"ast":null,"code":"import { applyPatch } from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\nimport * as vegaImport from 'vega';\nimport { writeConfig, isString, mergeConfig, isBoolean, isObject } from 'vega';\nimport { expressionInterpreter } from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport { Handler } from 'vega-tooltip';\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nclass LRUCache {\n  constructor() {\n    this.max = 1000;\n    this.map = new Map();\n  }\n  get(key) {\n    const value = this.map.get(key);\n    if (value === undefined) {\n      return undefined;\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key);\n      this.map.set(key, value);\n      return value;\n    }\n  }\n  delete(key) {\n    return this.map.delete(key);\n  }\n  set(key, value) {\n    const deleted = this.delete(key);\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value;\n        this.delete(firstKey);\n      }\n      this.map.set(key, value);\n    }\n    return this;\n  }\n}\nvar lrucache = LRUCache;\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({\n  loose: true\n});\nconst emptyOpts = Object.freeze({});\nconst parseOptions$1 = options => {\n  if (!options) {\n    return emptyOpts;\n  }\n  if (typeof options !== 'object') {\n    return looseOption;\n  }\n  return options;\n};\nvar parseOptions_1 = parseOptions$1;\nvar re$1 = {\n  exports: {}\n};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0';\nconst MAX_LENGTH$1 = 256;\nconst MAX_SAFE_INTEGER$1 = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */9007199254740991;\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH$1 - 6;\nconst RELEASE_TYPES = ['major', 'premajor', 'minor', 'preminor', 'patch', 'prepatch', 'prerelease'];\nvar constants = {\n  MAX_LENGTH: MAX_LENGTH$1,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER: MAX_SAFE_INTEGER$1,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010\n};\nconst debug$1 = typeof process === 'object' && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return console.error('SEMVER', ...args);\n} : () => {};\nvar debug_1 = debug$1;\n(function (module, exports) {\n  const {\n    MAX_SAFE_COMPONENT_LENGTH,\n    MAX_SAFE_BUILD_LENGTH,\n    MAX_LENGTH\n  } = constants;\n  const debug = debug_1;\n  exports = module.exports = {};\n\n  // The actual regexps go on exports.re\n  const re = exports.re = [];\n  const safeRe = exports.safeRe = [];\n  const src = exports.src = [];\n  const t = exports.t = {};\n  let R = 0;\n  const LETTERDASHNUMBER = '[a-zA-Z0-9-]';\n\n  // Replace some greedy regex tokens to prevent regex dos issues. These regex are\n  // used internally via the safeRe object since all inputs in this library get\n  // normalized first to trim and collapse all extra whitespace. The original\n  // regexes are exported for userland consumption and lower level usage. A\n  // future breaking change could export the safer regex only with a note that\n  // all input should have extra whitespace removed.\n  const safeRegexReplacements = [['\\\\s', 1], ['\\\\d', MAX_LENGTH], [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH]];\n  const makeSafeRegex = value => {\n    for (const [token, max] of safeRegexReplacements) {\n      value = value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`);\n    }\n    return value;\n  };\n  const createToken = (name, value, isGlobal) => {\n    const safe = makeSafeRegex(value);\n    const index = R++;\n    debug(name, index, value);\n    t[name] = index;\n    src[index] = value;\n    re[index] = new RegExp(value, isGlobal ? 'g' : undefined);\n    safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined);\n  };\n\n  // The following Regular Expressions can be used for tokenizing,\n  // validating, and parsing SemVer version strings.\n\n  // ## Numeric Identifier\n  // A single `0`, or a non-zero digit followed by zero or more digits.\n\n  createToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*');\n  createToken('NUMERICIDENTIFIERLOOSE', '\\\\d+');\n\n  // ## Non-numeric Identifier\n  // Zero or more digits, followed by a letter or hyphen, and then zero or\n  // more letters, digits, or hyphens.\n\n  createToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);\n\n  // ## Main Version\n  // Three dot-separated numeric identifiers.\n\n  createToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` + `(${src[t.NUMERICIDENTIFIER]})\\\\.` + `(${src[t.NUMERICIDENTIFIER]})`);\n  createToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` + `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` + `(${src[t.NUMERICIDENTIFIERLOOSE]})`);\n\n  // ## Pre-release Version Identifier\n  // A numeric identifier, or a non-numeric identifier.\n\n  createToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);\n  createToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);\n\n  // ## Pre-release Version\n  // Hyphen, followed by one or more dot-separated pre-release version\n  // identifiers.\n\n  createToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`);\n  createToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);\n\n  // ## Build Metadata Identifier\n  // Any combination of digits, letters, or hyphens.\n\n  createToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`);\n\n  // ## Build Metadata\n  // Plus sign, followed by one or more period-separated build metadata\n  // identifiers.\n\n  createToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`);\n\n  // ## Full Version String\n  // A main version, followed optionally by a pre-release version and\n  // build metadata.\n\n  // Note that the only major, minor, patch, and pre-release sections of\n  // the version string are capturing groups.  The build metadata is not a\n  // capturing group, because it should not ever be used in version\n  // comparison.\n\n  createToken('FULLPLAIN', `v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);\n  createToken('FULL', `^${src[t.FULLPLAIN]}$`);\n\n  // like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n  // also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n  // common in the npm registry.\n  createToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);\n  createToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`);\n  createToken('GTLT', '((?:<|>)?=?)');\n\n  // Something like \"2.*\" or \"1.2.x\".\n  // Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n  // Only the first item is strictly required.\n  createToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`);\n  createToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`);\n  createToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` + `(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?` + `)?)?`);\n  createToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` + `(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?` + `)?)?`);\n  createToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`);\n  createToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // Coercion.\n  // Extract anything that could conceivably be a part of a valid semver\n  createToken('COERCEPLAIN', `${'(^|[^\\\\d])' + '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` + `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` + `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);\n  createToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`);\n  createToken('COERCEFULL', src[t.COERCEPLAIN] + `(?:${src[t.PRERELEASE]})?` + `(?:${src[t.BUILD]})?` + `(?:$|[^\\\\d])`);\n  createToken('COERCERTL', src[t.COERCE], true);\n  createToken('COERCERTLFULL', src[t.COERCEFULL], true);\n\n  // Tilde ranges.\n  // Meaning is \"reasonably at or greater than\"\n  createToken('LONETILDE', '(?:~>?)');\n  createToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true);\n  exports.tildeTrimReplace = '$1~';\n  createToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);\n  createToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // Caret ranges.\n  // Meaning is \"at least and backwards compatible with\"\n  createToken('LONECARET', '(?:\\\\^)');\n  createToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true);\n  exports.caretTrimReplace = '$1^';\n  createToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);\n  createToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n  // A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\n  createToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`);\n  createToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`);\n\n  // An expression to strip any whitespace between the gtlt and the thing\n  // it modifies, so that `> 1.2.3` ==> `>1.2.3`\n  createToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);\n  exports.comparatorTrimReplace = '$1$2$3';\n\n  // Something like `1.2.3 - 1.2.4`\n  // Note that these all use the loose form, because they'll be\n  // checked against either the strict or loose comparator form\n  // later.\n  createToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` + `\\\\s+-\\\\s+` + `(${src[t.XRANGEPLAIN]})` + `\\\\s*$`);\n  createToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` + `\\\\s+-\\\\s+` + `(${src[t.XRANGEPLAINLOOSE]})` + `\\\\s*$`);\n\n  // Star ranges basically just allow anything at all.\n  createToken('STAR', '(<|>)?=?\\\\s*\\\\*');\n  // >=0.0.0 is like a star\n  createToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$');\n  createToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$');\n})(re$1, re$1.exports);\nvar reExports = re$1.exports;\nconst numeric = /^[0-9]+$/;\nconst compareIdentifiers$1 = (a, b) => {\n  const anum = numeric.test(a);\n  const bnum = numeric.test(b);\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n  return a === b ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a < b ? -1 : 1;\n};\nconst rcompareIdentifiers = (a, b) => compareIdentifiers$1(b, a);\nvar identifiers = {\n  compareIdentifiers: compareIdentifiers$1,\n  rcompareIdentifiers\n};\nconst debug = debug_1;\nconst {\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER\n} = constants;\nconst {\n  safeRe: re,\n  t\n} = reExports;\nconst parseOptions = parseOptions_1;\nconst {\n  compareIdentifiers\n} = identifiers;\nlet SemVer$1 = class SemVer {\n  constructor(version, options) {\n    options = parseOptions(options);\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose && version.includePrerelease === !!options.includePrerelease) {\n        return version;\n      } else {\n        version = version.version;\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`);\n    }\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);\n    }\n    debug('SemVer', version, options);\n    this.options = options;\n    this.loose = !!options.loose;\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease;\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL]);\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`);\n    }\n    this.raw = version;\n\n    // these are actually numbers\n    this.major = +m[1];\n    this.minor = +m[2];\n    this.patch = +m[3];\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version');\n    }\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version');\n    }\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version');\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = [];\n    } else {\n      this.prerelease = m[4].split('.').map(id => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id;\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num;\n          }\n        }\n        return id;\n      });\n    }\n    this.build = m[5] ? m[5].split('.') : [];\n    this.format();\n  }\n  format() {\n    this.version = `${this.major}.${this.minor}.${this.patch}`;\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`;\n    }\n    return this.version;\n  }\n  toString() {\n    return this.version;\n  }\n  compare(other) {\n    debug('SemVer.compare', this.version, this.options, other);\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0;\n      }\n      other = new SemVer(other, this.options);\n    }\n    if (other.version === this.version) {\n      return 0;\n    }\n    return this.compareMain(other) || this.comparePre(other);\n  }\n  compareMain(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n    return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);\n  }\n  comparePre(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1;\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1;\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0;\n    }\n    let i = 0;\n    do {\n      const a = this.prerelease[i];\n      const b = other.prerelease[i];\n      debug('prerelease compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  }\n  compareBuild(other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n    let i = 0;\n    do {\n      const a = this.build[i];\n      const b = other.build[i];\n      debug('build compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc(release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor = 0;\n        this.major++;\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'preminor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor++;\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0;\n        this.inc('patch', identifier, identifierBase);\n        this.inc('pre', identifier, identifierBase);\n        break;\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase);\n        }\n        this.inc('pre', identifier, identifierBase);\n        break;\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {\n          this.major++;\n        }\n        this.minor = 0;\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++;\n        }\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++;\n        }\n        this.prerelease = [];\n        break;\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        {\n          const base = Number(identifierBase) ? 1 : 0;\n          if (!identifier && identifierBase === false) {\n            throw new Error('invalid increment argument: identifier is empty');\n          }\n          if (this.prerelease.length === 0) {\n            this.prerelease = [base];\n          } else {\n            let i = this.prerelease.length;\n            while (--i >= 0) {\n              if (typeof this.prerelease[i] === 'number') {\n                this.prerelease[i]++;\n                i = -2;\n              }\n            }\n            if (i === -1) {\n              // didn't increment anything\n              if (identifier === this.prerelease.join('.') && identifierBase === false) {\n                throw new Error('invalid increment argument: identifier already exists');\n              }\n              this.prerelease.push(base);\n            }\n          }\n          if (identifier) {\n            // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n            // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n            let prerelease = [identifier, base];\n            if (identifierBase === false) {\n              prerelease = [identifier];\n            }\n            if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n              if (isNaN(this.prerelease[1])) {\n                this.prerelease = prerelease;\n              }\n            } else {\n              this.prerelease = prerelease;\n            }\n          }\n          break;\n        }\n      default:\n        throw new Error(`invalid increment argument: ${release}`);\n    }\n    this.raw = this.format();\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`;\n    }\n    return this;\n  }\n};\nvar semver = SemVer$1;\nconst SemVer = semver;\nconst compare$6 = (a, b, loose) => new SemVer(a, loose).compare(new SemVer(b, loose));\nvar compare_1 = compare$6;\nconst compare$5 = compare_1;\nconst eq$1 = (a, b, loose) => compare$5(a, b, loose) === 0;\nvar eq_1 = eq$1;\nconst compare$4 = compare_1;\nconst neq$1 = (a, b, loose) => compare$4(a, b, loose) !== 0;\nvar neq_1 = neq$1;\nconst compare$3 = compare_1;\nconst gt$1 = (a, b, loose) => compare$3(a, b, loose) > 0;\nvar gt_1 = gt$1;\nconst compare$2 = compare_1;\nconst gte$1 = (a, b, loose) => compare$2(a, b, loose) >= 0;\nvar gte_1 = gte$1;\nconst compare$1 = compare_1;\nconst lt$1 = (a, b, loose) => compare$1(a, b, loose) < 0;\nvar lt_1 = lt$1;\nconst compare = compare_1;\nconst lte$1 = (a, b, loose) => compare(a, b, loose) <= 0;\nvar lte_1 = lte$1;\nconst eq = eq_1;\nconst neq = neq_1;\nconst gt = gt_1;\nconst gte = gte_1;\nconst lt = lt_1;\nconst lte = lte_1;\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a === b;\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a !== b;\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose);\n    case '!=':\n      return neq(a, b, loose);\n    case '>':\n      return gt(a, b, loose);\n    case '>=':\n      return gte(a, b, loose);\n    case '<':\n      return lt(a, b, loose);\n    case '<=':\n      return lte(a, b, loose);\n    default:\n      throw new TypeError(`Invalid operator: ${op}`);\n  }\n};\nvar cmp_1 = cmp;\nvar comparator;\nvar hasRequiredComparator;\nfunction requireComparator() {\n  if (hasRequiredComparator) return comparator;\n  hasRequiredComparator = 1;\n  const ANY = Symbol('SemVer ANY');\n  // hoisted class for cyclic dependency\n  class Comparator {\n    static get ANY() {\n      return ANY;\n    }\n    constructor(comp, options) {\n      options = parseOptions(options);\n      if (comp instanceof Comparator) {\n        if (comp.loose === !!options.loose) {\n          return comp;\n        } else {\n          comp = comp.value;\n        }\n      }\n      comp = comp.trim().split(/\\s+/).join(' ');\n      debug('comparator', comp, options);\n      this.options = options;\n      this.loose = !!options.loose;\n      this.parse(comp);\n      if (this.semver === ANY) {\n        this.value = '';\n      } else {\n        this.value = this.operator + this.semver.version;\n      }\n      debug('comp', this);\n    }\n    parse(comp) {\n      const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];\n      const m = comp.match(r);\n      if (!m) {\n        throw new TypeError(`Invalid comparator: ${comp}`);\n      }\n      this.operator = m[1] !== undefined ? m[1] : '';\n      if (this.operator === '=') {\n        this.operator = '';\n      }\n\n      // if it literally is just '>' or '' then allow anything.\n      if (!m[2]) {\n        this.semver = ANY;\n      } else {\n        this.semver = new SemVer(m[2], this.options.loose);\n      }\n    }\n    toString() {\n      return this.value;\n    }\n    test(version) {\n      debug('Comparator.test', version, this.options.loose);\n      if (this.semver === ANY || version === ANY) {\n        return true;\n      }\n      if (typeof version === 'string') {\n        try {\n          version = new SemVer(version, this.options);\n        } catch (er) {\n          return false;\n        }\n      }\n      return cmp(version, this.operator, this.semver, this.options);\n    }\n    intersects(comp, options) {\n      if (!(comp instanceof Comparator)) {\n        throw new TypeError('a Comparator is required');\n      }\n      if (this.operator === '') {\n        if (this.value === '') {\n          return true;\n        }\n        return new Range(comp.value, options).test(this.value);\n      } else if (comp.operator === '') {\n        if (comp.value === '') {\n          return true;\n        }\n        return new Range(this.value, options).test(comp.semver);\n      }\n      options = parseOptions(options);\n\n      // Special cases where nothing can possibly be lower\n      if (options.includePrerelease && (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n        return false;\n      }\n      if (!options.includePrerelease && (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n        return false;\n      }\n\n      // Same direction increasing (> or >=)\n      if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n        return true;\n      }\n      // Same direction decreasing (< or <=)\n      if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n        return true;\n      }\n      // same SemVer and both sides are inclusive (<= or >=)\n      if (this.semver.version === comp.semver.version && this.operator.includes('=') && comp.operator.includes('=')) {\n        return true;\n      }\n      // opposite directions less than\n      if (cmp(this.semver, '<', comp.semver, options) && this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n        return true;\n      }\n      // opposite directions greater than\n      if (cmp(this.semver, '>', comp.semver, options) && this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n        return true;\n      }\n      return false;\n    }\n  }\n  comparator = Comparator;\n  const parseOptions = parseOptions_1;\n  const {\n    safeRe: re,\n    t\n  } = reExports;\n  const cmp = cmp_1;\n  const debug = debug_1;\n  const SemVer = semver;\n  const Range = requireRange();\n  return comparator;\n}\nvar range;\nvar hasRequiredRange;\nfunction requireRange() {\n  if (hasRequiredRange) return range;\n  hasRequiredRange = 1;\n  // hoisted class for cyclic dependency\n  class Range {\n    constructor(range, options) {\n      options = parseOptions(options);\n      if (range instanceof Range) {\n        if (range.loose === !!options.loose && range.includePrerelease === !!options.includePrerelease) {\n          return range;\n        } else {\n          return new Range(range.raw, options);\n        }\n      }\n      if (range instanceof Comparator) {\n        // just put it in the set and return\n        this.raw = range.value;\n        this.set = [[range]];\n        this.format();\n        return this;\n      }\n      this.options = options;\n      this.loose = !!options.loose;\n      this.includePrerelease = !!options.includePrerelease;\n\n      // First reduce all whitespace as much as possible so we do not have to rely\n      // on potentially slow regexes like \\s*. This is then stored and used for\n      // future error messages as well.\n      this.raw = range.trim().split(/\\s+/).join(' ');\n\n      // First, split on ||\n      this.set = this.raw.split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length);\n      if (!this.set.length) {\n        throw new TypeError(`Invalid SemVer Range: ${this.raw}`);\n      }\n\n      // if we have any that are not the null set, throw out null sets.\n      if (this.set.length > 1) {\n        // keep the first one, in case they're all null sets\n        const first = this.set[0];\n        this.set = this.set.filter(c => !isNullSet(c[0]));\n        if (this.set.length === 0) {\n          this.set = [first];\n        } else if (this.set.length > 1) {\n          // if we have any that are *, then the range is just *\n          for (const c of this.set) {\n            if (c.length === 1 && isAny(c[0])) {\n              this.set = [c];\n              break;\n            }\n          }\n        }\n      }\n      this.format();\n    }\n    format() {\n      this.range = this.set.map(comps => comps.join(' ').trim()).join('||').trim();\n      return this.range;\n    }\n    toString() {\n      return this.range;\n    }\n    parseRange(range) {\n      // memoize range parsing for performance.\n      // this is a very hot path, and fully deterministic.\n      const memoOpts = (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) | (this.options.loose && FLAG_LOOSE);\n      const memoKey = memoOpts + ':' + range;\n      const cached = cache.get(memoKey);\n      if (cached) {\n        return cached;\n      }\n      const loose = this.options.loose;\n      // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n      const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];\n      range = range.replace(hr, hyphenReplace(this.options.includePrerelease));\n      debug('hyphen replace', range);\n\n      // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n      range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);\n      debug('comparator trim', range);\n\n      // `~ 1.2.3` => `~1.2.3`\n      range = range.replace(re[t.TILDETRIM], tildeTrimReplace);\n      debug('tilde trim', range);\n\n      // `^ 1.2.3` => `^1.2.3`\n      range = range.replace(re[t.CARETTRIM], caretTrimReplace);\n      debug('caret trim', range);\n\n      // At this point, the range is completely trimmed and\n      // ready to be split into comparators.\n\n      let rangeList = range.split(' ').map(comp => parseComparator(comp, this.options)).join(' ').split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options));\n      if (loose) {\n        // in loose mode, throw out any that are not valid comparators\n        rangeList = rangeList.filter(comp => {\n          debug('loose invalid filter', comp, this.options);\n          return !!comp.match(re[t.COMPARATORLOOSE]);\n        });\n      }\n      debug('range list', rangeList);\n\n      // if any comparators are the null set, then replace with JUST null set\n      // if more than one comparator, remove any * comparators\n      // also, don't include the same comparator more than once\n      const rangeMap = new Map();\n      const comparators = rangeList.map(comp => new Comparator(comp, this.options));\n      for (const comp of comparators) {\n        if (isNullSet(comp)) {\n          return [comp];\n        }\n        rangeMap.set(comp.value, comp);\n      }\n      if (rangeMap.size > 1 && rangeMap.has('')) {\n        rangeMap.delete('');\n      }\n      const result = [...rangeMap.values()];\n      cache.set(memoKey, result);\n      return result;\n    }\n    intersects(range, options) {\n      if (!(range instanceof Range)) {\n        throw new TypeError('a Range is required');\n      }\n      return this.set.some(thisComparators => {\n        return isSatisfiable(thisComparators, options) && range.set.some(rangeComparators => {\n          return isSatisfiable(rangeComparators, options) && thisComparators.every(thisComparator => {\n            return rangeComparators.every(rangeComparator => {\n              return thisComparator.intersects(rangeComparator, options);\n            });\n          });\n        });\n      });\n    }\n\n    // if ANY of the sets match ALL of its comparators, then pass\n    test(version) {\n      if (!version) {\n        return false;\n      }\n      if (typeof version === 'string') {\n        try {\n          version = new SemVer(version, this.options);\n        } catch (er) {\n          return false;\n        }\n      }\n      for (let i = 0; i < this.set.length; i++) {\n        if (testSet(this.set[i], version, this.options)) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n  range = Range;\n  const LRU = lrucache;\n  const cache = new LRU();\n  const parseOptions = parseOptions_1;\n  const Comparator = requireComparator();\n  const debug = debug_1;\n  const SemVer = semver;\n  const {\n    safeRe: re,\n    t,\n    comparatorTrimReplace,\n    tildeTrimReplace,\n    caretTrimReplace\n  } = reExports;\n  const {\n    FLAG_INCLUDE_PRERELEASE,\n    FLAG_LOOSE\n  } = constants;\n  const isNullSet = c => c.value === '<0.0.0-0';\n  const isAny = c => c.value === '';\n\n  // take a set of comparators and determine whether there\n  // exists a version which can satisfy it\n  const isSatisfiable = (comparators, options) => {\n    let result = true;\n    const remainingComparators = comparators.slice();\n    let testComparator = remainingComparators.pop();\n    while (result && remainingComparators.length) {\n      result = remainingComparators.every(otherComparator => {\n        return testComparator.intersects(otherComparator, options);\n      });\n      testComparator = remainingComparators.pop();\n    }\n    return result;\n  };\n\n  // comprised of xranges, tildes, stars, and gtlt's at this point.\n  // already replaced the hyphen ranges\n  // turn into a set of JUST comparators.\n  const parseComparator = (comp, options) => {\n    debug('comp', comp, options);\n    comp = replaceCarets(comp, options);\n    debug('caret', comp);\n    comp = replaceTildes(comp, options);\n    debug('tildes', comp);\n    comp = replaceXRanges(comp, options);\n    debug('xrange', comp);\n    comp = replaceStars(comp, options);\n    debug('stars', comp);\n    return comp;\n  };\n  const isX = id => !id || id.toLowerCase() === 'x' || id === '*';\n\n  // ~, ~> --> * (any, kinda silly)\n  // ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n  // ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n  // ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n  // ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n  // ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n  // ~0.0.1 --> >=0.0.1 <0.1.0-0\n  const replaceTildes = (comp, options) => {\n    return comp.trim().split(/\\s+/).map(c => replaceTilde(c, options)).join(' ');\n  };\n  const replaceTilde = (comp, options) => {\n    const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];\n    return comp.replace(r, (_, M, m, p, pr) => {\n      debug('tilde', comp, _, M, m, p, pr);\n      let ret;\n      if (isX(M)) {\n        ret = '';\n      } else if (isX(m)) {\n        ret = `>=${M}.0.0 <${+M + 1}.0.0-0`;\n      } else if (isX(p)) {\n        // ~1.2 == >=1.2.0 <1.3.0-0\n        ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`;\n      } else if (pr) {\n        debug('replaceTilde pr', pr);\n        ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;\n      } else {\n        // ~1.2.3 == >=1.2.3 <1.3.0-0\n        ret = `>=${M}.${m}.${p} <${M}.${+m + 1}.0-0`;\n      }\n      debug('tilde return', ret);\n      return ret;\n    });\n  };\n\n  // ^ --> * (any, kinda silly)\n  // ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n  // ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n  // ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n  // ^1.2.3 --> >=1.2.3 <2.0.0-0\n  // ^1.2.0 --> >=1.2.0 <2.0.0-0\n  // ^0.0.1 --> >=0.0.1 <0.0.2-0\n  // ^0.1.0 --> >=0.1.0 <0.2.0-0\n  const replaceCarets = (comp, options) => {\n    return comp.trim().split(/\\s+/).map(c => replaceCaret(c, options)).join(' ');\n  };\n  const replaceCaret = (comp, options) => {\n    debug('caret', comp, options);\n    const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];\n    const z = options.includePrerelease ? '-0' : '';\n    return comp.replace(r, (_, M, m, p, pr) => {\n      debug('caret', comp, _, M, m, p, pr);\n      let ret;\n      if (isX(M)) {\n        ret = '';\n      } else if (isX(m)) {\n        ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`;\n      } else if (isX(p)) {\n        if (M === '0') {\n          ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`;\n        } else {\n          ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`;\n        }\n      } else if (pr) {\n        debug('replaceCaret pr', pr);\n        if (M === '0') {\n          if (m === '0') {\n            ret = `>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p + 1}-0`;\n          } else {\n            ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;\n          }\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr} <${+M + 1}.0.0-0`;\n        }\n      } else {\n        debug('no pr');\n        if (M === '0') {\n          if (m === '0') {\n            ret = `>=${M}.${m}.${p}${z} <${M}.${m}.${+p + 1}-0`;\n          } else {\n            ret = `>=${M}.${m}.${p}${z} <${M}.${+m + 1}.0-0`;\n          }\n        } else {\n          ret = `>=${M}.${m}.${p} <${+M + 1}.0.0-0`;\n        }\n      }\n      debug('caret return', ret);\n      return ret;\n    });\n  };\n  const replaceXRanges = (comp, options) => {\n    debug('replaceXRanges', comp, options);\n    return comp.split(/\\s+/).map(c => replaceXRange(c, options)).join(' ');\n  };\n  const replaceXRange = (comp, options) => {\n    comp = comp.trim();\n    const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];\n    return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n      debug('xRange', comp, ret, gtlt, M, m, p, pr);\n      const xM = isX(M);\n      const xm = xM || isX(m);\n      const xp = xm || isX(p);\n      const anyX = xp;\n      if (gtlt === '=' && anyX) {\n        gtlt = '';\n      }\n\n      // if we're including prereleases in the match, then we need\n      // to fix this to -0, the lowest possible prerelease value\n      pr = options.includePrerelease ? '-0' : '';\n      if (xM) {\n        if (gtlt === '>' || gtlt === '<') {\n          // nothing is allowed\n          ret = '<0.0.0-0';\n        } else {\n          // nothing is forbidden\n          ret = '*';\n        }\n      } else if (gtlt && anyX) {\n        // we know patch is an x, because we have any x at all.\n        // replace X with 0\n        if (xm) {\n          m = 0;\n        }\n        p = 0;\n        if (gtlt === '>') {\n          // >1 => >=2.0.0\n          // >1.2 => >=1.3.0\n          gtlt = '>=';\n          if (xm) {\n            M = +M + 1;\n            m = 0;\n            p = 0;\n          } else {\n            m = +m + 1;\n            p = 0;\n          }\n        } else if (gtlt === '<=') {\n          // <=0.7.x is actually <0.8.0, since any 0.7.x should\n          // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n          gtlt = '<';\n          if (xm) {\n            M = +M + 1;\n          } else {\n            m = +m + 1;\n          }\n        }\n        if (gtlt === '<') {\n          pr = '-0';\n        }\n        ret = `${gtlt + M}.${m}.${p}${pr}`;\n      } else if (xm) {\n        ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`;\n      } else if (xp) {\n        ret = `>=${M}.${m}.0${pr} <${M}.${+m + 1}.0-0`;\n      }\n      debug('xRange return', ret);\n      return ret;\n    });\n  };\n\n  // Because * is AND-ed with everything else in the comparator,\n  // and '' means \"any version\", just remove the *s entirely.\n  const replaceStars = (comp, options) => {\n    debug('replaceStars', comp, options);\n    // Looseness is ignored here.  star is always as loose as it gets!\n    return comp.trim().replace(re[t.STAR], '');\n  };\n  const replaceGTE0 = (comp, options) => {\n    debug('replaceGTE0', comp, options);\n    return comp.trim().replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '');\n  };\n\n  // This function is passed to string.replace(re[t.HYPHENRANGE])\n  // M, m, patch, prerelease, build\n  // 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n  // 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n  // 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n  // TODO build?\n  const hyphenReplace = incPr => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr) => {\n    if (isX(fM)) {\n      from = '';\n    } else if (isX(fm)) {\n      from = `>=${fM}.0.0${incPr ? '-0' : ''}`;\n    } else if (isX(fp)) {\n      from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`;\n    } else if (fpr) {\n      from = `>=${from}`;\n    } else {\n      from = `>=${from}${incPr ? '-0' : ''}`;\n    }\n    if (isX(tM)) {\n      to = '';\n    } else if (isX(tm)) {\n      to = `<${+tM + 1}.0.0-0`;\n    } else if (isX(tp)) {\n      to = `<${tM}.${+tm + 1}.0-0`;\n    } else if (tpr) {\n      to = `<=${tM}.${tm}.${tp}-${tpr}`;\n    } else if (incPr) {\n      to = `<${tM}.${tm}.${+tp + 1}-0`;\n    } else {\n      to = `<=${to}`;\n    }\n    return `${from} ${to}`.trim();\n  };\n  const testSet = (set, version, options) => {\n    for (let i = 0; i < set.length; i++) {\n      if (!set[i].test(version)) {\n        return false;\n      }\n    }\n    if (version.prerelease.length && !options.includePrerelease) {\n      // Find the set of versions that are allowed to have prereleases\n      // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n      // That should allow `1.2.3-pr.2` to pass.\n      // However, `1.2.4-alpha.notready` should NOT be allowed,\n      // even though it's within the range set by the comparators.\n      for (let i = 0; i < set.length; i++) {\n        debug(set[i].semver);\n        if (set[i].semver === Comparator.ANY) {\n          continue;\n        }\n        if (set[i].semver.prerelease.length > 0) {\n          const allowed = set[i].semver;\n          if (allowed.major === version.major && allowed.minor === version.minor && allowed.patch === version.patch) {\n            return true;\n          }\n        }\n      }\n\n      // Version has a -pre, but it's not one of the ones we like.\n      return false;\n    }\n    return true;\n  };\n  return range;\n}\nconst Range = requireRange();\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n};\nvar satisfies_1 = satisfies;\nvar satisfies$1 = /*@__PURE__*/getDefaultExportFromCjs(satisfies_1);\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nfunction post(window, url, data) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url);\n  const wait = 10_000;\n  const step = 250;\n  const {\n    origin\n  } = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n  function listen(evt) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n\n// generated with build-style.sh\nvar embedStyle = `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\nfunction mergeDeep(dest) {\n  for (var _len2 = arguments.length, src = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    src[_key2 - 1] = arguments[_key2];\n  }\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\nfunction deepMerge_(dest, src) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\nvar name = \"vega-embed\";\nvar version$1 = \"6.26.0\";\nvar description = \"Publish Vega visualizations as embedded web components.\";\nvar keywords = [\"vega\", \"data\", \"visualization\", \"component\", \"embed\"];\nvar repository = {\n  type: \"git\",\n  url: \"http://github.com/vega/vega-embed.git\"\n};\nvar author = {\n  name: \"UW Interactive Data Lab\",\n  url: \"http://idl.cs.washington.edu\"\n};\nvar contributors = [{\n  name: \"Dominik Moritz\",\n  url: \"https://www.domoritz.de\"\n}];\nvar bugs = {\n  url: \"https://github.com/vega/vega-embed/issues\"\n};\nvar homepage = \"https://github.com/vega/vega-embed#readme\";\nvar license = \"BSD-3-Clause\";\nvar main = \"build/vega-embed.js\";\nvar module = \"build/vega-embed.module.js\";\nvar unpkg = \"build/vega-embed.min.js\";\nvar jsdelivr = \"build/vega-embed.min.js\";\nvar types = \"build/vega-embed.module.d.ts\";\nvar files = [\"src\", \"build\"];\nvar exports = {\n  \".\": {\n    \"import\": {\n      types: \"./build/vega-embed.module.d.ts\",\n      \"default\": \"./build/vega-embed.module.js\"\n    },\n    require: {\n      \"default\": \"./build/vega-embed.js\"\n    }\n  }\n};\nvar devDependencies = {\n  \"@babel/core\": \"^7.24.7\",\n  \"@babel/eslint-parser\": \"^7.24.7\",\n  \"@babel/plugin-transform-runtime\": \"^7.24.7\",\n  \"@babel/preset-env\": \"^7.24.7\",\n  \"@babel/preset-typescript\": \"^7.24.7\",\n  \"@release-it/conventional-changelog\": \"^8.0.1\",\n  \"@rollup/plugin-commonjs\": \"26.0.1\",\n  \"@rollup/plugin-json\": \"^6.1.0\",\n  \"@rollup/plugin-node-resolve\": \"^15.2.3\",\n  \"@rollup/plugin-terser\": \"^0.4.4\",\n  \"@types/semver\": \"^7.5.8\",\n  \"@typescript-eslint/parser\": \"^7.15.0\",\n  \"@vitest/coverage-v8\": \"^1.6.0\",\n  \"browser-sync\": \"^3.0.2\",\n  concurrently: \"^8.2.2\",\n  \"del-cli\": \"^5.1.0\",\n  eslint: \"^9.6.0\",\n  \"eslint-config-prettier\": \"^9.1.0\",\n  \"eslint-plugin-prettier\": \"^5.1.3\",\n  \"eslint-plugin-vitest\": \"^0.5.4\",\n  jsdom: \"^24.1.0\",\n  \"postinstall-postinstall\": \"^2.1.0\",\n  prettier: \"^3.3.2\",\n  \"release-it\": \"^17.4.1\",\n  rollup: \"4.18.0\",\n  \"rollup-plugin-bundle-size\": \"^1.0.3\",\n  \"rollup-plugin-ts\": \"^3.4.5\",\n  sass: \"^1.77.6\",\n  typescript: \"^5.5.3\",\n  \"typescript-eslint\": \"^7.15.0\",\n  vega: \"^5.30.0\",\n  \"vega-lite\": \"^5.19.0\",\n  vitest: \"^1.6.0\",\n  \"vitest-canvas-mock\": \"^0.3.3\"\n};\nvar peerDependencies = {\n  vega: \"^5.21.0\",\n  \"vega-lite\": \"*\"\n};\nvar dependencies = {\n  \"fast-json-patch\": \"^3.1.1\",\n  \"json-stringify-pretty-compact\": \"^3.0.0\",\n  semver: \"^7.6.2\",\n  tslib: \"^2.6.3\",\n  \"vega-interpreter\": \"^1.0.5\",\n  \"vega-schema-url-parser\": \"^2.2.0\",\n  \"vega-themes\": \"^2.15.0\",\n  \"vega-tooltip\": \"^0.34.0\"\n};\nvar scripts = {\n  prebuild: \"yarn clean && yarn build:style\",\n  build: \"rollup -c\",\n  \"build:style\": \"./build-style.sh\",\n  clean: \"del-cli build src/style.ts\",\n  prepublishOnly: \"yarn clean && yarn build\",\n  preversion: \"yarn lint && yarn test\",\n  serve: \"browser-sync start --directory -s -f build *.html\",\n  start: \"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'\",\n  pretest: \"yarn build:style\",\n  test: \"vitest run\",\n  prettierbase: \"prettier '*.{css,scss,html}'\",\n  format: \"eslint . --fix && yarn prettierbase --write\",\n  lint: \"eslint . && yarn prettierbase --check\",\n  release: \"release-it\"\n};\nvar pkg = {\n  name: name,\n  version: version$1,\n  description: description,\n  keywords: keywords,\n  repository: repository,\n  author: author,\n  contributors: contributors,\n  bugs: bugs,\n  homepage: homepage,\n  license: license,\n  main: main,\n  module: module,\n  unpkg: unpkg,\n  jsdelivr: jsdelivr,\n  types: types,\n  files: files,\n  exports: exports,\n  devDependencies: devDependencies,\n  peerDependencies: peerDependencies,\n  dependencies: dependencies,\n  scripts: scripts\n};\nconst version = pkg.version;\nconst vega = vegaImport;\nlet vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = typeof window !== 'undefined' ? window : undefined;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\nconst DEFAULT_ACTIONS = {\n  export: {\n    svg: true,\n    png: true\n  },\n  source: true,\n  compiled: true,\n  editor: true\n};\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG'\n};\nconst NAMES = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite'\n};\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available'\n};\nconst PREPROCESSOR = {\n  vega: vgSpec => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec, {\n    config: config\n  }).spec\n};\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\nfunction isTooltipHandler(h) {\n  return typeof h === 'function';\n}\nfunction viewSource(source, sourceHeader, sourceFooter, mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('');\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nfunction guessMode(spec, providedMode) {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(`The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${NAMES[providedMode] ?? providedMode}.`);\n    }\n    const mode = parsed.library;\n    if (!satisfies$1(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(`The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`);\n    }\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if ('mark' in spec || 'encoding' in spec || 'layer' in spec || 'hconcat' in spec || 'vconcat' in spec || 'facet' in spec || 'repeat' in spec) {\n    return 'vega-lite';\n  }\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n  return providedMode ?? 'vega';\n}\nfunction isLoader(o) {\n  return !!(o && 'load' in o);\n}\nfunction createLoader(opts) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\nfunction embedOptionsFromUsermeta(parsedSpec) {\n  const opts = parsedSpec.usermeta?.embedOptions ?? {};\n  if (isString(opts.defaultStyle)) {\n    // we don't allow styles set via usermeta since it would allow injection of logic (we set the style via innerHTML)\n    opts.defaultStyle = false;\n  }\n  return opts;\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nasync function embed(el, spec) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let parsedSpec;\n  let loader;\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n  const loadedEmbedOptions = embedOptionsFromUsermeta(parsedSpec);\n  const usermetaLoader = loadedEmbedOptions.loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n  const usermetaOpts = await loadOpts(loadedEmbedOptions, loader);\n  const parsedOpts = await loadOpts(opts, loader);\n  const mergedOpts = {\n    ...mergeDeep(parsedOpts, usermetaOpts),\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {})\n  };\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\nasync function loadOpts(opt, loader) {\n  const config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return {\n    ...opt,\n    ...(patch ? {\n      patch\n    } : {}),\n    ...(config ? {\n      config\n    } : {})\n  };\n}\nfunction getRoot(el) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot ? {\n    root: possibleRoot,\n    rootContainer: possibleRoot\n  } : {\n    root: document,\n    rootContainer: document.head ?? document.body\n  };\n}\nasync function _embed(el, spec) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let loader = arguments.length > 3 ? arguments[3] : undefined;\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = {\n    ...I18N,\n    ...opts.i18n\n  };\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n  if (opts.defaultStyle !== false) {\n    const ID = 'vega-embed-style';\n    const {\n      root,\n      rootContainer\n    } = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerHTML = opts.defaultStyle === undefined || opts.defaultStyle === true ? embedStyle.toString() : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n  const mode = guessMode(spec, opts.mode);\n  let vgSpec = PREPROCESSOR[mode](spec, config);\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n      if (!satisfies$1(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  // Set custom expression functions\n  if (opts.expressionFunctions) {\n    for (const name in opts.expressionFunctions) {\n      const expressionFunction = opts.expressionFunctions[name];\n      if ('fn' in expressionFunction) {\n        vega.expressionFunction(name, expressionFunction.fn, expressionFunction['visitor']);\n      } else if (expressionFunction instanceof Function) {\n        vega.expressionFunction(name, expressionFunction);\n      }\n    }\n  }\n  const {\n    ast\n  } = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : config, {\n    ast\n  });\n  const view = new (opts.viewClass || vega.View)(runtime, {\n    loader,\n    logLevel,\n    renderer,\n    ...(ast ? {\n      expr: vega.expressionInterpreter ?? opts.expr ?? expressionInterpreter\n    } : {})\n  });\n  view.addSignalListener('autosize', (_, autosize) => {\n    const {\n      type\n    } = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n  if (opts.tooltip !== false) {\n    const {\n      loader: loader_,\n      tooltip\n    } = opts;\n    const baseURL = loader_ && !isLoader(loader_) ? loader_?.baseURL : undefined;\n    const handler = isTooltipHandler(tooltip) ? tooltip :\n    // user provided boolean true or tooltip options\n    new Handler({\n      baseURL,\n      ...(tooltip === true ? {} : tooltip)\n    }).call;\n    view.tooltip(handler);\n  }\n  let {\n    hover\n  } = opts;\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n  if (hover) {\n    const {\n      hoverSet,\n      updateSet\n    } = typeof hover === 'boolean' ? {} : hover;\n    view.hover(hoverSet, updateSet);\n  }\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n  await view.initialize(container, opts.bind).runAsync();\n  let documentClickHandler;\n  if (actions !== false) {\n    let wrapper = element;\n    if (opts.defaultStyle !== false || opts.forceActionsMenu) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n      details.append(summary);\n      documentClickHandler = ev => {\n        if (!details.contains(ev.target)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png']) {\n        if (actions === true || actions.export === true || actions.export[ext]) {\n          const i18nExportAction = i18n[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n          const scaleFactor = isObject(opts.scaleFactor) ? opts.scaleFactor[ext] : opts.scaleFactor;\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, scaleFactor);\n            this.href = url;\n          });\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (e) {\n        post(window, editorUrl, {\n          config: config,\n          mode: patch ? 'vega' : mode,\n          renderer,\n          spec: stringify(patch ? vgSpec : spec)\n        });\n        e.preventDefault();\n      });\n      ctrl.append(editorLink);\n    }\n  }\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n  return {\n    view,\n    spec,\n    vgSpec,\n    finalize,\n    embedOptions: opts\n  };\n}\nexport { DEFAULT_ACTIONS, embed as default, guessMode, vega, vegaLite, version };","map":{"version":3,"names":["LRUCache","constructor","max","map","Map","get","key","value","undefined","delete","set","deleted","size","firstKey","keys","next","lrucache","looseOption","Object","freeze","loose","emptyOpts","parseOptions$1","options","parseOptions_1","SEMVER_SPEC_VERSION","MAX_LENGTH$1","MAX_SAFE_INTEGER$1","Number","MAX_SAFE_INTEGER","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","RELEASE_TYPES","constants","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","debug$1","process","env","NODE_DEBUG","test","_len","arguments","length","args","Array","_key","console","error","debug_1","MAX_LENGTH","debug","exports","module","re","safeRe","src","t","R","LETTERDASHNUMBER","safeRegexReplacements","makeSafeRegex","token","split","join","createToken","name","isGlobal","safe","index","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","numeric","compareIdentifiers$1","a","b","anum","bnum","rcompareIdentifiers","identifiers","reExports","parseOptions","compareIdentifiers","SemVer","version","includePrerelease","TypeError","m","trim","match","LOOSE","FULL","raw","major","minor","patch","prerelease","id","num","build","format","toString","compare","other","compareMain","comparePre","i","compareBuild","inc","release","identifier","identifierBase","base","Error","push","isNaN","semver","SemVer$1","compare$6","compare_1","compare$5","eq$1","eq_1","compare$4","neq$1","neq_1","compare$3","gt$1","gt_1","compare$2","gte$1","gte_1","compare$1","lt$1","lt_1","lte$1","lte_1","eq","neq","gt","gte","lt","lte","cmp","op","cmp_1","ANY","Symbol","Comparator","comp","parse","operator","r","COMPARATORLOOSE","COMPARATOR","er","intersects","Range","startsWith","includes","comparator","requireRange","range","parseRange","filter","c","first","isNullSet","isAny","comps","memoOpts","memoKey","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","replace","hyphenReplace","COMPARATORTRIM","TILDETRIM","CARETTRIM","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","has","result","values","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","LRU","requireComparator","remainingComparators","slice","testComparator","pop","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","p","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","allowed","satisfies","satisfies_1","post","window","url","data","editor","open","wait","step","origin","URL","count","listen","evt","source","removeEventListener","addEventListener","send","postMessage","setTimeout","embedStyle","mergeDeep","dest","_len2","_key2","s","deepMerge_","property","writeConfig","pkg","vega","vegaImport","vegaLite","vegaLiteImport","w","vl","compile","DEFAULT_ACTIONS","export","svg","png","compiled","I18N","CLICK_TO_VIEW_ACTIONS","COMPILED_ACTION","EDITOR_ACTION","PNG_ACTION","SOURCE_ACTION","SVG_ACTION","NAMES","VERSION","PREPROCESSOR","vgSpec","vega-lite","vlSpec","config","spec","SVG_CIRCLES","CHART_WRAPPER_CLASS","isTooltipHandler","h","viewSource","sourceHeader","sourceFooter","mode","header","footer","win","document","write","title","guessMode","providedMode","$schema","parsed","schemaParser","library","warn","satisfies$1","isLoader","o","createLoader","opts","loader","embedOptionsFromUsermeta","parsedSpec","usermeta","embedOptions","isString","defaultStyle","embed","el","JSON","load","loadedEmbedOptions","usermetaLoader","usermetaOpts","loadOpts","parsedOpts","mergedOpts","mergeConfig","_embed","opt","getRoot","possibleRoot","getRootNode","ShadowRoot","root","rootContainer","head","body","theme","themes","actions","isBoolean","i18n","renderer","logLevel","Warn","downloadFileName","element","querySelector","ID","getElementById","style","createElement","innerHTML","appendChild","classList","add","container","chartWrapper","Function","applyPatch","newDocument","formatLocale","timeFormatLocale","expressionFunctions","expressionFunction","fn","ast","runtime","view","viewClass","View","expr","expressionInterpreter","addSignalListener","autosize","type","remove","tooltip","loader_","baseURL","handler","Handler","call","hover","hoverSet","updateSet","width","height","padding","initialize","bind","runAsync","documentClickHandler","wrapper","forceActionsMenu","details","append","summary","ev","contains","target","removeAttribute","ctrl","ext","i18nExportAction","toUpperCase","exportLink","scaleFactor","isObject","text","href","download","e","preventDefault","toImageURL","viewSourceLink","stringify","compileLink","editorUrl","editorLink","finalize"],"sources":["C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\lrucache.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\parse-options.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\constants.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\debug.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\re.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\internal\\identifiers.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\classes\\semver.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\compare.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\eq.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\neq.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\gt.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\gte.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\lt.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\lte.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\cmp.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\classes\\comparator.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\classes\\range.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\node_modules\\semver\\functions\\satisfies.js","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\src\\post.ts","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\src\\style.ts","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\src\\util.ts","C:\\Users\\sutul\\OneDrive\\Desktop\\Fall2024\\Human AI Interaction\\HAI-Assignment-2\\client\\node_modules\\vega-embed\\src\\embed.ts"],"sourcesContent":["class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range\n      .trim()\n      .split(/\\s+/)\n      .join(' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => comps.join(' ').trim())\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","import {MessageData} from './types';\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nexport default function (window: Window, url: string, data: MessageData) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url)!;\n  const wait = 10_000;\n  const step = 250;\n  const {origin} = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n\n  function listen(evt: MessageEvent) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n","// generated with build-style.sh\nexport default `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\n","import {writeConfig} from 'vega';\n\nexport function isURL(s: string): boolean {\n  return s.startsWith('http://') || s.startsWith('https://') || s.startsWith('//');\n}\n\nexport type DeepPartial<T> = {[P in keyof T]?: P extends unknown ? unknown : DeepPartial<T[P]>};\n\nexport function mergeDeep<T>(dest: T, ...src: readonly DeepPartial<T>[]): T {\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\n\nfunction deepMerge_(dest: any, src: any) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\n","import {applyPatch, Operation} from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\n// need this import because of https://github.com/npm/node-semver/issues/381\nimport satisfies from 'semver/functions/satisfies';\nimport * as vegaImport from 'vega';\nimport {\n  AutoSize,\n  Config as VgConfig,\n  EncodeEntryName,\n  isBoolean,\n  isObject,\n  isString,\n  Loader,\n  LoaderOptions,\n  mergeConfig,\n  Renderers,\n  Spec as VgSpec,\n  TooltipHandler,\n  View,\n} from 'vega';\nimport {expressionInterpreter} from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport {Config as VlConfig, TopLevelSpec as VlSpec} from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport {Handler, Options as TooltipOptions} from 'vega-tooltip';\nimport post from './post';\nimport embedStyle from './style';\nimport {Config, ExpressionFunction, Mode} from './types';\nimport {mergeDeep} from './util';\nimport pkg from '../package.json';\n\nexport const version = pkg.version;\n\nexport * from './types';\n\nexport const vega = vegaImport;\nexport let vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = (typeof window !== 'undefined' ? window : undefined) as any;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\n\nexport interface Actions {\n  export?: boolean | {svg?: boolean; png?: boolean};\n  source?: boolean;\n  compiled?: boolean;\n  editor?: boolean;\n}\n\nexport const DEFAULT_ACTIONS = {export: {svg: true, png: true}, source: true, compiled: true, editor: true};\n\nexport interface Hover {\n  hoverSet?: EncodeEntryName;\n  updateSet?: EncodeEntryName;\n}\n\nexport type PatchFunc = (spec: VgSpec) => VgSpec;\n\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG',\n};\n\nexport interface EmbedOptions<S = string, R = Renderers> {\n  bind?: HTMLElement | string;\n  actions?: boolean | Actions;\n  mode?: Mode;\n  theme?: keyof Omit<typeof themes, 'version'>;\n  defaultStyle?: boolean | string;\n  logLevel?: number;\n  loader?: Loader | LoaderOptions;\n  renderer?: R;\n  tooltip?: TooltipHandler | TooltipOptions | boolean;\n  patch?: S | PatchFunc | Operation[];\n  width?: number;\n  height?: number;\n  padding?: number | {left?: number; right?: number; top?: number; bottom?: number};\n  scaleFactor?: number | {svg?: number; png?: number};\n  config?: S | Config;\n  sourceHeader?: string;\n  sourceFooter?: string;\n  editorUrl?: string;\n  hover?: boolean | Hover;\n  i18n?: Partial<typeof I18N>;\n  downloadFileName?: string;\n  formatLocale?: Record<string, unknown>;\n  timeFormatLocale?: Record<string, unknown>;\n  expressionFunctions?: ExpressionFunction;\n  ast?: boolean;\n  expr?: typeof expressionInterpreter;\n  viewClass?: typeof View;\n  forceActionsMenu?: boolean;\n}\n\nconst NAMES: {[key in Mode]: string} = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite',\n};\n\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available',\n};\n\nconst PREPROCESSOR: {[mode in Mode]: (spec: any, config?: Config) => VgSpec} = {\n  vega: (vgSpec: VgSpec) => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec as VlSpec, {config: config as VlConfig}).spec,\n};\n\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\n\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\n\nexport type VisualizationSpec = VlSpec | VgSpec;\n\nexport interface Result {\n  /** The Vega view. */\n  view: View;\n\n  /** The input specification. */\n  spec: VisualizationSpec;\n\n  /** The compiled and patched Vega specification. */\n  vgSpec: VgSpec;\n\n  /** The Vega-Embed options. */\n  embedOptions: EmbedOptions;\n\n  /** Removes references to unwanted behaviors and memory leaks. Calls Vega's `view.finalize`.  */\n  finalize: () => void;\n}\n\nfunction isTooltipHandler(h?: boolean | TooltipOptions | TooltipHandler): h is TooltipHandler {\n  return typeof h === 'function';\n}\n\nfunction viewSource(source: string, sourceHeader: string, sourceFooter: string, mode: Mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('')!;\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nexport function guessMode(spec: VisualizationSpec, providedMode?: Mode): Mode {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(\n        `The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${\n          NAMES[providedMode] ?? providedMode\n        }.`,\n      );\n    }\n\n    const mode = parsed.library as Mode;\n\n    if (!satisfies(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(\n        `The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`,\n      );\n    }\n\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if (\n    'mark' in spec ||\n    'encoding' in spec ||\n    'layer' in spec ||\n    'hconcat' in spec ||\n    'vconcat' in spec ||\n    'facet' in spec ||\n    'repeat' in spec\n  ) {\n    return 'vega-lite';\n  }\n\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n\n  return providedMode ?? 'vega';\n}\n\nfunction isLoader(o?: LoaderOptions | Loader): o is Loader {\n  return !!(o && 'load' in o);\n}\n\nfunction createLoader(opts?: Loader | LoaderOptions) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\n\nfunction embedOptionsFromUsermeta(parsedSpec: VisualizationSpec) {\n  const opts = (parsedSpec.usermeta as any)?.embedOptions ?? {};\n  if (isString(opts.defaultStyle)) {\n    // we don't allow styles set via usermeta since it would allow injection of logic (we set the style via innerHTML)\n    opts.defaultStyle = false;\n  }\n  return opts;\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nexport default async function embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec | string,\n  opts: EmbedOptions = {},\n): Promise<Result> {\n  let parsedSpec: VisualizationSpec;\n  let loader: Loader | undefined;\n\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n\n  const loadedEmbedOptions = embedOptionsFromUsermeta(parsedSpec);\n  const usermetaLoader = loadedEmbedOptions.loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n\n  const usermetaOpts = await loadOpts(loadedEmbedOptions, loader);\n  const parsedOpts = await loadOpts(opts, loader);\n\n  const mergedOpts = {\n    ...mergeDeep(parsedOpts, usermetaOpts),\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {}),\n  };\n\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\n\nasync function loadOpts(opt: EmbedOptions, loader: Loader): Promise<EmbedOptions<never>> {\n  const config: Config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch: PatchFunc | Operation[] = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return {\n    ...(opt as any),\n    ...(patch ? {patch} : {}),\n    ...(config ? {config} : {}),\n  };\n}\n\nfunction getRoot(el: Element) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot\n    ? {root: possibleRoot, rootContainer: possibleRoot}\n    : {root: document, rootContainer: document.head ?? document.body};\n}\n\nasync function _embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec,\n  opts: EmbedOptions<never> = {},\n  loader: Loader,\n): Promise<Result> {\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep<Actions>({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = {...I18N, ...opts.i18n};\n\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n\n  if (opts.defaultStyle !== false) {\n    const ID = 'vega-embed-style';\n    const {root, rootContainer} = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerHTML =\n        opts.defaultStyle === undefined || opts.defaultStyle === true\n          ? (embedStyle ?? '').toString()\n          : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n\n  const mode = guessMode(spec, opts.mode);\n\n  let vgSpec: VgSpec = PREPROCESSOR[mode](spec, config);\n\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n\n      if (!satisfies(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  // Set custom expression functions\n  if (opts.expressionFunctions) {\n    for (const name in opts.expressionFunctions) {\n      const expressionFunction = opts.expressionFunctions[name];\n      if ('fn' in expressionFunction) {\n        vega.expressionFunction(name, expressionFunction.fn, expressionFunction['visitor']);\n      } else if (expressionFunction instanceof Function) {\n        vega.expressionFunction(name, expressionFunction);\n      }\n    }\n  }\n\n  const {ast} = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : (config as VgConfig), {ast});\n\n  const view = new (opts.viewClass || vega.View)(runtime, {\n    loader,\n    logLevel,\n    renderer,\n    ...(ast ? {expr: (vega as any).expressionInterpreter ?? opts.expr ?? expressionInterpreter} : {}),\n  });\n\n  view.addSignalListener('autosize', (_, autosize: Exclude<AutoSize, string>) => {\n    const {type} = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n\n  if (opts.tooltip !== false) {\n    const {loader: loader_, tooltip} = opts;\n    const baseURL = loader_ && !isLoader(loader_) ? loader_?.baseURL : undefined;\n    const handler = isTooltipHandler(tooltip)\n      ? tooltip\n      : // user provided boolean true or tooltip options\n        new Handler({baseURL, ...(tooltip === true ? {} : tooltip)}).call;\n\n    view.tooltip(handler);\n  }\n\n  let {hover} = opts;\n\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n\n  if (hover) {\n    const {hoverSet, updateSet} = (typeof hover === 'boolean' ? {} : hover) as Hover;\n\n    view.hover(hoverSet, updateSet);\n  }\n\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n\n  await view.initialize(container, opts.bind).runAsync();\n\n  let documentClickHandler: ((this: Document, ev: MouseEvent) => void) | undefined;\n\n  if (actions !== false) {\n    let wrapper = element;\n\n    if (opts.defaultStyle !== false || opts.forceActionsMenu) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n\n      details.append(summary);\n\n      documentClickHandler = (ev: MouseEvent) => {\n        if (!details.contains(ev.target as any)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png'] as const) {\n        if (actions === true || actions.export === true || (actions.export as {svg?: boolean; png?: boolean})[ext]) {\n          const i18nExportAction = (i18n as {[key: string]: string})[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n          const scaleFactor = isObject(opts.scaleFactor) ? opts.scaleFactor[ext] : opts.scaleFactor;\n\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (this, e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, scaleFactor);\n            this.href = url;\n          });\n\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (this, e) {\n        post(window, editorUrl, {\n          config: config as Config,\n          mode: patch ? 'vega' : mode,\n          renderer,\n          spec: stringify(patch ? vgSpec : spec),\n        });\n        e.preventDefault();\n      });\n\n      ctrl.append(editorLink);\n    }\n  }\n\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n\n  return {view, spec, vgSpec, finalize, embedOptions: opts};\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}