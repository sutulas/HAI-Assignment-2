{"ast":null,"code":"import { isObject, mergeConfig, writeConfig } from 'vega-util';\nimport { AXIS_CONFIGS, isConditionalAxisValue } from './axis';\nimport { signalOrValueRefWithCondition, signalRefOrValue } from './compile/common';\nimport { getAllCompositeMarks } from './compositemark';\nimport { replaceExprRef } from './expr';\nimport { VL_ONLY_LEGEND_CONFIG } from './guide';\nimport { HEADER_CONFIGS } from './header';\nimport { defaultLegendConfig } from './legend';\nimport * as mark from './mark';\nimport { MARK_CONFIGS, PRIMITIVE_MARKS, VL_ONLY_MARK_CONFIG_PROPERTIES, VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX } from './mark';\nimport { assembleParameterSignals } from './parameter';\nimport { defaultScaleConfig } from './scale';\nimport { defaultConfig as defaultSelectionConfig } from './selection';\nimport { DEFAULT_SPACING, isStep } from './spec/base';\nimport { extractTitleConfig } from './title';\nimport { duplicate, getFirstDefined, hasProperty, isEmpty, keys, omit } from './util';\nexport function getViewConfigContinuousSize(viewConfig, channel) {\n  return viewConfig[channel] ?? viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\nexport function getViewConfigDiscreteStep(viewConfig, channel) {\n  const size = getViewConfigDiscreteSize(viewConfig, channel);\n  return isStep(size) ? size.step : DEFAULT_STEP;\n}\nexport function getViewConfigDiscreteSize(viewConfig, channel) {\n  const size = viewConfig[channel] ?? viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n  return getFirstDefined(size, {\n    step: viewConfig.step\n  });\n}\nexport const DEFAULT_STEP = 20;\nexport const defaultViewConfig = {\n  continuousWidth: 200,\n  continuousHeight: 200,\n  step: DEFAULT_STEP\n};\nexport function isVgScheme(rangeScheme) {\n  return hasProperty(rangeScheme, 'scheme');\n}\nexport const defaultConfig = {\n  background: 'white',\n  padding: 5,\n  timeFormat: '%b %d, %Y',\n  countTitle: 'Count of Records',\n  view: defaultViewConfig,\n  mark: mark.defaultMarkConfig,\n  arc: {},\n  area: {},\n  bar: mark.defaultBarConfig,\n  circle: {},\n  geoshape: {},\n  image: {},\n  line: {},\n  point: {},\n  rect: mark.defaultRectConfig,\n  rule: {\n    color: 'black'\n  },\n  // Need this to override default color in mark config\n  square: {},\n  text: {\n    color: 'black'\n  },\n  // Need this to override default color in mark config\n  tick: mark.defaultTickConfig,\n  trail: {},\n  boxplot: {\n    size: 14,\n    extent: 1.5,\n    box: {},\n    median: {\n      color: 'white'\n    },\n    outliers: {},\n    rule: {},\n    ticks: null\n  },\n  errorbar: {\n    center: 'mean',\n    rule: true,\n    ticks: false\n  },\n  errorband: {\n    band: {\n      opacity: 0.3\n    },\n    borders: false\n  },\n  scale: defaultScaleConfig,\n  projection: {},\n  legend: defaultLegendConfig,\n  header: {\n    titlePadding: 10,\n    labelPadding: 10\n  },\n  headerColumn: {},\n  headerRow: {},\n  headerFacet: {},\n  selection: defaultSelectionConfig,\n  style: {},\n  title: {},\n  facet: {\n    spacing: DEFAULT_SPACING\n  },\n  concat: {\n    spacing: DEFAULT_SPACING\n  },\n  normalizedNumberFormat: '.0%'\n};\n// Tableau10 color palette, copied from `vegaScale.scheme('tableau10')`\nconst tab10 = ['#4c78a8', '#f58518', '#e45756', '#72b7b2', '#54a24b', '#eeca3b', '#b279a2', '#ff9da6', '#9d755d', '#bab0ac'];\nexport const DEFAULT_FONT_SIZE = {\n  text: 11,\n  guideLabel: 10,\n  guideTitle: 11,\n  groupTitle: 13,\n  groupSubtitle: 12\n};\nexport const DEFAULT_COLOR = {\n  blue: tab10[0],\n  orange: tab10[1],\n  red: tab10[2],\n  teal: tab10[3],\n  green: tab10[4],\n  yellow: tab10[5],\n  purple: tab10[6],\n  pink: tab10[7],\n  brown: tab10[8],\n  gray0: '#000',\n  gray1: '#111',\n  gray2: '#222',\n  gray3: '#333',\n  gray4: '#444',\n  gray5: '#555',\n  gray6: '#666',\n  gray7: '#777',\n  gray8: '#888',\n  gray9: '#999',\n  gray10: '#aaa',\n  gray11: '#bbb',\n  gray12: '#ccc',\n  gray13: '#ddd',\n  gray14: '#eee',\n  gray15: '#fff'\n};\nexport function colorSignalConfig() {\n  let color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    signals: [{\n      name: 'color',\n      value: isObject(color) ? {\n        ...DEFAULT_COLOR,\n        ...color\n      } : DEFAULT_COLOR\n    }],\n    mark: {\n      color: {\n        signal: 'color.blue'\n      }\n    },\n    rule: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    text: {\n      color: {\n        signal: 'color.gray0'\n      }\n    },\n    style: {\n      'guide-label': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'guide-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-title': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      'group-subtitle': {\n        fill: {\n          signal: 'color.gray0'\n        }\n      },\n      cell: {\n        stroke: {\n          signal: 'color.gray8'\n        }\n      }\n    },\n    axis: {\n      domainColor: {\n        signal: 'color.gray13'\n      },\n      gridColor: {\n        signal: 'color.gray8'\n      },\n      tickColor: {\n        signal: 'color.gray13'\n      }\n    },\n    range: {\n      category: [{\n        signal: 'color.blue'\n      }, {\n        signal: 'color.orange'\n      }, {\n        signal: 'color.red'\n      }, {\n        signal: 'color.teal'\n      }, {\n        signal: 'color.green'\n      }, {\n        signal: 'color.yellow'\n      }, {\n        signal: 'color.purple'\n      }, {\n        signal: 'color.pink'\n      }, {\n        signal: 'color.brown'\n      }, {\n        signal: 'color.grey8'\n      }]\n    }\n  };\n}\nexport function fontSizeSignalConfig(fontSize) {\n  return {\n    signals: [{\n      name: 'fontSize',\n      value: isObject(fontSize) ? {\n        ...DEFAULT_FONT_SIZE,\n        ...fontSize\n      } : DEFAULT_FONT_SIZE\n    }],\n    text: {\n      fontSize: {\n        signal: 'fontSize.text'\n      }\n    },\n    style: {\n      'guide-label': {\n        fontSize: {\n          signal: 'fontSize.guideLabel'\n        }\n      },\n      'guide-title': {\n        fontSize: {\n          signal: 'fontSize.guideTitle'\n        }\n      },\n      'group-title': {\n        fontSize: {\n          signal: 'fontSize.groupTitle'\n        }\n      },\n      'group-subtitle': {\n        fontSize: {\n          signal: 'fontSize.groupSubtitle'\n        }\n      }\n    }\n  };\n}\nexport function fontConfig(font) {\n  return {\n    text: {\n      font\n    },\n    style: {\n      'guide-label': {\n        font\n      },\n      'guide-title': {\n        font\n      },\n      'group-title': {\n        font\n      },\n      'group-subtitle': {\n        font\n      }\n    }\n  };\n}\nfunction getAxisConfigInternal(axisConfig) {\n  const props = keys(axisConfig || {});\n  const axisConfigInternal = {};\n  for (const prop of props) {\n    const val = axisConfig[prop];\n    axisConfigInternal[prop] = isConditionalAxisValue(val) ? signalOrValueRefWithCondition(val) : signalRefOrValue(val);\n  }\n  return axisConfigInternal;\n}\nfunction getStyleConfigInternal(styleConfig) {\n  const props = keys(styleConfig);\n  const styleConfigInternal = {};\n  for (const prop of props) {\n    // We need to cast to cheat a bit here since styleConfig can be either mark config or axis config\n    styleConfigInternal[prop] = getAxisConfigInternal(styleConfig[prop]);\n  }\n  return styleConfigInternal;\n}\nconst configPropsWithExpr = [...MARK_CONFIGS, ...AXIS_CONFIGS, ...HEADER_CONFIGS, 'background', 'padding', 'legend', 'lineBreak', 'scale', 'style', 'title', 'view'];\n/**\n * Merge specified config with default config and config for the `color` flag,\n * then replace all expressions with signals\n */\nexport function initConfig() {\n  let specifiedConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    color,\n    font,\n    fontSize,\n    selection,\n    ...restConfig\n  } = specifiedConfig;\n  const mergedConfig = mergeConfig({}, duplicate(defaultConfig), font ? fontConfig(font) : {}, color ? colorSignalConfig(color) : {}, fontSize ? fontSizeSignalConfig(fontSize) : {}, restConfig || {});\n  // mergeConfig doesn't recurse and overrides object values.\n  if (selection) {\n    writeConfig(mergedConfig, 'selection', selection, true);\n  }\n  const outputConfig = omit(mergedConfig, configPropsWithExpr);\n  for (const prop of ['background', 'lineBreak', 'padding']) {\n    if (mergedConfig[prop]) {\n      outputConfig[prop] = signalRefOrValue(mergedConfig[prop]);\n    }\n  }\n  for (const markConfigType of mark.MARK_CONFIGS) {\n    if (mergedConfig[markConfigType]) {\n      // FIXME: outputConfig[markConfigType] expects that types are replaced recursively but replaceExprRef only replaces one level deep\n      outputConfig[markConfigType] = replaceExprRef(mergedConfig[markConfigType]);\n    }\n  }\n  for (const axisConfigType of AXIS_CONFIGS) {\n    if (mergedConfig[axisConfigType]) {\n      outputConfig[axisConfigType] = getAxisConfigInternal(mergedConfig[axisConfigType]);\n    }\n  }\n  for (const headerConfigType of HEADER_CONFIGS) {\n    if (mergedConfig[headerConfigType]) {\n      outputConfig[headerConfigType] = replaceExprRef(mergedConfig[headerConfigType]);\n    }\n  }\n  if (mergedConfig.legend) {\n    outputConfig.legend = replaceExprRef(mergedConfig.legend);\n  }\n  if (mergedConfig.scale) {\n    const {\n      invalid,\n      ...otherScaleConfig\n    } = mergedConfig.scale;\n    const newScaleInvalid = replaceExprRef(invalid, {\n      level: 1\n    });\n    outputConfig.scale = {\n      ...replaceExprRef(otherScaleConfig),\n      ...(keys(newScaleInvalid).length > 0 ? {\n        invalid: newScaleInvalid\n      } : {})\n    };\n  }\n  if (mergedConfig.style) {\n    outputConfig.style = getStyleConfigInternal(mergedConfig.style);\n  }\n  if (mergedConfig.title) {\n    outputConfig.title = replaceExprRef(mergedConfig.title);\n  }\n  if (mergedConfig.view) {\n    outputConfig.view = replaceExprRef(mergedConfig.view);\n  }\n  return outputConfig;\n}\nconst MARK_STYLES = new Set(['view', ...PRIMITIVE_MARKS]);\nconst VL_ONLY_CONFIG_PROPERTIES = ['color', 'fontSize', 'background',\n// We apply background to the spec directly.\n'padding', 'facet', 'concat', 'numberFormat', 'numberFormatType', 'normalizedNumberFormat', 'normalizedNumberFormatType', 'timeFormat', 'countTitle', 'header', 'axisQuantitative', 'axisTemporal', 'axisDiscrete', 'axisPoint', 'axisXBand', 'axisXPoint', 'axisXDiscrete', 'axisXQuantitative', 'axisXTemporal', 'axisYBand', 'axisYPoint', 'axisYDiscrete', 'axisYQuantitative', 'axisYTemporal', 'scale', 'selection', 'overlay' // FIXME: Redesign and unhide this\n];\nconst VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = {\n  view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step'],\n  ...VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n};\nexport function stripAndRedirectConfig(config) {\n  config = duplicate(config);\n  for (const prop of VL_ONLY_CONFIG_PROPERTIES) {\n    delete config[prop];\n  }\n  if (config.axis) {\n    // delete condition axis config\n    for (const prop in config.axis) {\n      if (isConditionalAxisValue(config.axis[prop])) {\n        delete config.axis[prop];\n      }\n    }\n  }\n  if (config.legend) {\n    for (const prop of VL_ONLY_LEGEND_CONFIG) {\n      delete config.legend[prop];\n    }\n  }\n  // Remove Vega-Lite only generic mark config\n  if (config.mark) {\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config.mark[prop];\n    }\n    if (config.mark.tooltip && isObject(config.mark.tooltip)) {\n      delete config.mark.tooltip;\n    }\n  }\n  if (config.params) {\n    config.signals = (config.signals || []).concat(assembleParameterSignals(config.params));\n    delete config.params;\n  }\n  for (const markType of MARK_STYLES) {\n    // Remove Vega-Lite-only mark config\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config[markType][prop];\n    }\n    // Remove Vega-Lite only mark-specific config\n    const vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n    if (vlOnlyMarkSpecificConfigs) {\n      for (const prop of vlOnlyMarkSpecificConfigs) {\n        delete config[markType][prop];\n      }\n    }\n    // Redirect mark config to config.style so that mark config only affect its own mark type\n    // without affecting other marks that share the same underlying Vega marks.\n    // For example, config.rect should not affect bar marks.\n    redirectConfigToStyleConfig(config, markType);\n  }\n  for (const m of getAllCompositeMarks()) {\n    // Clean up the composite mark config as we don't need them in the output specs anymore\n    delete config[m];\n  }\n  redirectTitleConfig(config);\n  // Remove empty config objects.\n  for (const prop in config) {\n    // @ts-ignore\n    if (isObject(config[prop]) && isEmpty(config[prop])) {\n      // @ts-ignore\n      delete config[prop];\n    }\n  }\n  return isEmpty(config) ? undefined : config;\n}\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config) {\n  const {\n    titleMarkConfig,\n    subtitleMarkConfig,\n    subtitle\n  } = extractTitleConfig(config.title);\n  // set config.style if title/subtitleMarkConfig is not an empty object\n  if (!isEmpty(titleMarkConfig)) {\n    config.style['group-title'] = {\n      ...config.style['group-title'],\n      ...titleMarkConfig // config.title has higher precedence than config.style.group-title in Vega\n    };\n  }\n  if (!isEmpty(subtitleMarkConfig)) {\n    config.style['group-subtitle'] = {\n      ...config.style['group-subtitle'],\n      ...subtitleMarkConfig\n    };\n  }\n  // subtitle part can stay in config.title since header titles do not use subtitle\n  if (!isEmpty(subtitle)) {\n    config.title = subtitle;\n  } else {\n    delete config.title;\n  }\n}\nfunction redirectConfigToStyleConfig(config, prop,\n// string = composite mark\ntoProp, compositeMarkPart) {\n  const propConfig = compositeMarkPart ? config[prop][compositeMarkPart] : config[prop];\n  if (prop === 'view') {\n    toProp = 'cell'; // View's default style is \"cell\"\n  }\n  const style = {\n    ...propConfig,\n    ...config.style[toProp ?? prop]\n  };\n  // set config.style if it is not an empty object\n  if (!isEmpty(style)) {\n    config.style[toProp ?? prop] = style;\n  }\n  if (!compositeMarkPart) {\n    // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n    delete config[prop];\n  }\n}","map":{"version":3,"names":["isObject","mergeConfig","writeConfig","AXIS_CONFIGS","isConditionalAxisValue","signalOrValueRefWithCondition","signalRefOrValue","getAllCompositeMarks","replaceExprRef","VL_ONLY_LEGEND_CONFIG","HEADER_CONFIGS","defaultLegendConfig","mark","MARK_CONFIGS","PRIMITIVE_MARKS","VL_ONLY_MARK_CONFIG_PROPERTIES","VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","assembleParameterSignals","defaultScaleConfig","defaultConfig","defaultSelectionConfig","DEFAULT_SPACING","isStep","extractTitleConfig","duplicate","getFirstDefined","hasProperty","isEmpty","keys","omit","getViewConfigContinuousSize","viewConfig","channel","getViewConfigDiscreteStep","size","getViewConfigDiscreteSize","step","DEFAULT_STEP","defaultViewConfig","continuousWidth","continuousHeight","isVgScheme","rangeScheme","background","padding","timeFormat","countTitle","view","defaultMarkConfig","arc","area","bar","defaultBarConfig","circle","geoshape","image","line","point","rect","defaultRectConfig","rule","color","square","text","tick","defaultTickConfig","trail","boxplot","extent","box","median","outliers","ticks","errorbar","center","errorband","band","opacity","borders","scale","projection","legend","header","titlePadding","labelPadding","headerColumn","headerRow","headerFacet","selection","style","title","facet","spacing","concat","normalizedNumberFormat","tab10","DEFAULT_FONT_SIZE","guideLabel","guideTitle","groupTitle","groupSubtitle","DEFAULT_COLOR","blue","orange","red","teal","green","yellow","purple","pink","brown","gray0","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","gray9","gray10","gray11","gray12","gray13","gray14","gray15","colorSignalConfig","arguments","length","undefined","signals","name","value","signal","fill","cell","stroke","axis","domainColor","gridColor","tickColor","range","category","fontSizeSignalConfig","fontSize","fontConfig","font","getAxisConfigInternal","axisConfig","props","axisConfigInternal","prop","val","getStyleConfigInternal","styleConfig","styleConfigInternal","configPropsWithExpr","initConfig","specifiedConfig","restConfig","mergedConfig","outputConfig","markConfigType","axisConfigType","headerConfigType","invalid","otherScaleConfig","newScaleInvalid","level","MARK_STYLES","Set","VL_ONLY_CONFIG_PROPERTIES","VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","stripAndRedirectConfig","config","tooltip","params","markType","vlOnlyMarkSpecificConfigs","redirectConfigToStyleConfig","m","redirectTitleConfig","titleMarkConfig","subtitleMarkConfig","subtitle","toProp","compositeMarkPart","propConfig"],"sources":["C:\\Users\\sutul\\node_modules\\vega-lite\\src\\config.ts"],"sourcesContent":["import type {Color, InitSignal, Locale, NewSignal, RangeConfig, RangeScheme, SignalRef} from 'vega';\nimport {isObject, mergeConfig, writeConfig} from 'vega-util';\nimport {Axis, AxisConfig, AxisConfigMixins, AXIS_CONFIGS, isConditionalAxisValue} from './axis';\nimport {signalOrValueRefWithCondition, signalRefOrValue} from './compile/common';\nimport {CompositeMarkConfigMixins, getAllCompositeMarks} from './compositemark';\nimport {ExprRef, replaceExprRef} from './expr';\nimport {VL_ONLY_LEGEND_CONFIG} from './guide';\nimport {HeaderConfigMixins, HEADER_CONFIGS} from './header';\nimport {defaultLegendConfig, LegendConfig} from './legend';\nimport * as mark from './mark';\nimport {\n  AnyMarkConfig,\n  Mark,\n  MarkConfig,\n  MarkConfigMixins,\n  MARK_CONFIGS,\n  PRIMITIVE_MARKS,\n  VL_ONLY_MARK_CONFIG_PROPERTIES,\n  VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n} from './mark';\nimport {assembleParameterSignals} from './parameter';\nimport {ProjectionConfig} from './projection';\nimport {defaultScaleConfig, ScaleConfig} from './scale';\nimport {defaultConfig as defaultSelectionConfig, SelectionConfig} from './selection';\nimport {BaseViewBackground, CompositionConfigMixins, DEFAULT_SPACING, isStep} from './spec/base';\nimport {TopLevelProperties} from './spec/toplevel';\nimport {extractTitleConfig, TitleConfig} from './title';\nimport {duplicate, getFirstDefined, hasProperty, isEmpty, keys, omit} from './util';\n\nexport interface ViewConfig<ES extends ExprRef | SignalRef> extends BaseViewBackground<ES> {\n  /**\n   * The default width when the plot has a continuous field for x or longitude, or has arc marks.\n   *\n   * __Default value:__ `200`\n   */\n  continuousWidth?: number;\n\n  /**\n   * The default width when the plot has non-arc marks and either a discrete x-field or no x-field.\n   * The width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step.\n   *\n   * __Default value:__ a step size based on `config.view.step`.\n   */\n  discreteWidth?: number | {step: number};\n  /**\n   * The default height when the plot has a continuous y-field for x or latitude, or has arc marks.\n   *\n   * __Default value:__ `200`\n   */\n  continuousHeight?: number;\n\n  /**\n   * The default height when the plot has non arc marks and either a discrete y-field or no y-field.\n   * The height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step.\n   *\n   * __Default value:__ a step size based on `config.view.step`.\n   */\n  discreteHeight?: number | {step: number};\n\n  /**\n   * Default step size for x-/y- discrete fields.\n   */\n  step?: number;\n\n  /**\n   * Whether the view should be clipped.\n   */\n  clip?: boolean;\n}\n\nexport function getViewConfigContinuousSize<ES extends ExprRef | SignalRef>(\n  viewConfig: ViewConfig<ES>,\n  channel: 'width' | 'height'\n) {\n  return (viewConfig as any)[channel] ?? viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\n\nexport function getViewConfigDiscreteStep<ES extends ExprRef | SignalRef>(\n  viewConfig: ViewConfig<ES>,\n  channel: 'width' | 'height'\n) {\n  const size = getViewConfigDiscreteSize(viewConfig, channel);\n  return isStep(size) ? size.step : DEFAULT_STEP;\n}\n\nexport function getViewConfigDiscreteSize<ES extends ExprRef | SignalRef>(\n  viewConfig: ViewConfig<ES>,\n  channel: 'width' | 'height'\n) {\n  const size = (viewConfig as any)[channel] ?? viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n  return getFirstDefined(size, {step: viewConfig.step});\n}\n\nexport const DEFAULT_STEP = 20;\n\nexport const defaultViewConfig: ViewConfig<SignalRef> = {\n  continuousWidth: 200,\n  continuousHeight: 200,\n  step: DEFAULT_STEP\n};\n\nexport function isVgScheme(rangeScheme: string[] | RangeScheme): rangeScheme is RangeScheme {\n  return hasProperty(rangeScheme, 'scheme');\n}\n\nexport type ColorConfig = Record<string, Color>;\n\nexport type FontSizeConfig = Record<string, number>;\n\nexport interface FormatConfig {\n  /**\n   * If numberFormatType is not specified,\n   * D3 number format for guide labels, text marks, and tooltips of non-normalized fields (fields *without* `stack: \"normalize\"`). For example `\"s\"` for SI units.\n   * Use [D3's number format pattern](https://github.com/d3/d3-format#locale_format).\n   *\n   * If `config.numberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function.\n   */\n  numberFormat?: string;\n\n  /**\n   * [Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type)\n   * for `config.numberFormat`.\n   *\n   * __Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format).\n   * __Note:__ You must also set `customFormatTypes` to `true` to use this feature.\n   */\n  numberFormatType?: string;\n\n  /**\n   * If normalizedNumberFormatType is not specified,\n   * D3 number format for axis labels, text marks, and tooltips of normalized stacked fields (fields with `stack: \"normalize\"`). For example `\"s\"` for SI units.\n   * Use [D3's number format pattern](https://github.com/d3/d3-format#locale_format).\n   *\n   * If `config.normalizedNumberFormatType` is specified and `config.customFormatTypes` is `true`, this value will be passed as `format` alongside `datum.value` to the `config.numberFormatType` function.\n   * __Default value:__ `%`\n   */\n  normalizedNumberFormat?: string;\n\n  /**\n   * [Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type)\n   * for `config.normalizedNumberFormat`.\n   *\n   * __Default value:__ `undefined` -- This is equilvalent to call D3-format, which is exposed as [`format` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#format).\n   * __Note:__ You must also set `customFormatTypes` to `true` to use this feature.\n   */\n  normalizedNumberFormatType?: string;\n\n  /**\n   * Default time format for raw time values (without time units) in text marks, legend labels and header labels.\n   *\n   * __Default value:__ `\"%b %d, %Y\"`\n   * __Note:__ Axes automatically determine the format for each label automatically so this config does not affect axes.\n   */\n  timeFormat?: string;\n\n  /**\n   * [Custom format type](https://vega.github.io/vega-lite/docs/config.html#custom-format-type)\n   * for `config.timeFormat`.\n   *\n   * __Default value:__ `undefined` -- This is equilvalent to call D3-time-format, which is exposed as [`timeFormat` in Vega-Expression](https://vega.github.io/vega/docs/expressions/#timeFormat).\n   * __Note:__ You must also set `customFormatTypes` to `true` and there must *not* be a `timeUnit` defined to use this feature.\n   */\n  timeFormatType?: string;\n}\n\nexport interface VLOnlyConfig<ES extends ExprRef | SignalRef> extends FormatConfig {\n  /**\n   * Default font for all text marks, titles, and labels.\n   */\n  font?: string;\n\n  /**\n   * Default color signals.\n   *\n   * @hidden\n   */\n  color?: boolean | ColorConfig;\n\n  /**\n   * Default font size signals.\n   *\n   * @hidden\n   */\n  fontSize?: boolean | FontSizeConfig;\n\n  /**\n   * Default axis and legend title for count fields.\n   *\n   * __Default value:__ `'Count of Records`.\n   *\n   * @type {string}\n   */\n  countTitle?: string;\n\n  /**\n   * Defines how Vega-Lite generates title for fields. There are three possible styles:\n   * - `\"verbal\"` (Default) - displays function in a verbal style (e.g., \"Sum of field\", \"Year-month of date\", \"field (binned)\").\n   * - `\"function\"` - displays function using parentheses and capitalized texts (e.g., \"SUM(field)\", \"YEARMONTH(date)\", \"BIN(field)\").\n   * - `\"plain\"` - displays only the field name without functions (e.g., \"field\", \"date\", \"field\").\n   */\n  fieldTitle?: 'verbal' | 'functional' | 'plain';\n\n  /**\n   * Allow the `formatType` property for text marks and guides to accept a custom formatter function [registered as a Vega expression](https://vega.github.io/vega-lite/usage/compile.html#format-type).\n   */\n  customFormatTypes?: boolean;\n\n  /**\n   * Define [custom format configuration](https://vega.github.io/vega-lite/docs/config.html#format) for tooltips. If unspecified, default format config will be applied.\n   */\n  tooltipFormat?: FormatConfig;\n\n  /** Default properties for [single view plots](https://vega.github.io/vega-lite/docs/spec.html#single). */\n  view?: ViewConfig<ES>;\n\n  /**\n   * Scale configuration determines default properties for all [scales](https://vega.github.io/vega-lite/docs/scale.html). For a full list of scale configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config).\n   */\n  scale?: ScaleConfig<ES>;\n\n  /** An object hash for defining default properties for each type of selections. */\n  selection?: SelectionConfig;\n}\n\nexport type StyleConfigIndex<ES extends ExprRef | SignalRef> = Partial<Record<string, AnyMarkConfig<ES> | Axis<ES>>> &\n  MarkConfigMixins<ES> & {\n    /**\n     * Default style for axis, legend, and header titles.\n     */\n    'guide-title'?: MarkConfig<ES>;\n\n    /**\n     * Default style for axis, legend, and header labels.\n     */\n    'guide-label'?: MarkConfig<ES>;\n\n    /**\n     * Default style for chart titles\n     */\n    'group-title'?: MarkConfig<ES>;\n\n    /**\n     * Default style for chart subtitles\n     */\n    'group-subtitle'?: MarkConfig<ES>;\n  };\n\nexport interface Config<ES extends ExprRef | SignalRef = ExprRef | SignalRef>\n  extends TopLevelProperties<ES>,\n    VLOnlyConfig<ES>,\n    MarkConfigMixins<ES>,\n    CompositeMarkConfigMixins,\n    AxisConfigMixins<ES>,\n    HeaderConfigMixins<ES>,\n    CompositionConfigMixins {\n  /**\n   * An object hash that defines default range arrays or schemes for using with scales.\n   * For a full list of scale range configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config).\n   */\n  range?: RangeConfig;\n\n  /**\n   * Legend configuration, which determines default properties for all [legends](https://vega.github.io/vega-lite/docs/legend.html). For a full list of legend configuration options, please see the [corresponding section of in the legend documentation](https://vega.github.io/vega-lite/docs/legend.html#config).\n   */\n  legend?: LegendConfig<ES>;\n\n  /**\n   * Title configuration, which determines default properties for all [titles](https://vega.github.io/vega-lite/docs/title.html). For a full list of title configuration options, please see the [corresponding section of the title documentation](https://vega.github.io/vega-lite/docs/title.html#config).\n   */\n  title?: TitleConfig<ES>;\n\n  /**\n   * Projection configuration, which determines default properties for all [projections](https://vega.github.io/vega-lite/docs/projection.html). For a full list of projection configuration options, please see the [corresponding section of the projection documentation](https://vega.github.io/vega-lite/docs/projection.html#config).\n   */\n  projection?: ProjectionConfig;\n\n  /** An object hash that defines key-value mappings to determine default properties for marks with a given [style](https://vega.github.io/vega-lite/docs/mark.html#mark-def). The keys represent styles names; the values have to be valid [mark configuration objects](https://vega.github.io/vega-lite/docs/mark.html#config). */\n  style?: StyleConfigIndex<ES>;\n\n  /**\n   * A delimiter, such as a newline character, upon which to break text strings into multiple lines. This property provides a global default for text marks, which is overridden by mark or style config settings, and by the lineBreak mark encoding channel. If signal-valued, either string or regular expression (regexp) values are valid.\n   */\n  lineBreak?: string | ES;\n\n  /**\n   * A boolean flag indicating if ARIA default attributes should be included for marks and guides (SVG output only). If false, the `\"aria-hidden\"` attribute will be set for all guides, removing them from the ARIA accessibility tree and Vega-Lite will not generate default descriptions for marks.\n   *\n   * __Default value:__ `true`.\n   */\n  aria?: boolean;\n\n  /**\n   * Locale definitions for string parsing and formatting of number and date values. The locale object should contain `number` and/or `time` properties with [locale definitions](https://vega.github.io/vega/docs/api/locale/). Locale definitions provided in the config block may be overridden by the View constructor locale option.\n   */\n  locale?: Locale;\n\n  /**\n   * @hidden\n   */\n  signals?: (InitSignal | NewSignal)[];\n}\n\nexport const defaultConfig: Config<SignalRef> = {\n  background: 'white',\n\n  padding: 5,\n  timeFormat: '%b %d, %Y',\n  countTitle: 'Count of Records',\n\n  view: defaultViewConfig,\n\n  mark: mark.defaultMarkConfig,\n\n  arc: {},\n  area: {},\n  bar: mark.defaultBarConfig,\n  circle: {},\n  geoshape: {},\n  image: {},\n  line: {},\n  point: {},\n  rect: mark.defaultRectConfig,\n  rule: {color: 'black'}, // Need this to override default color in mark config\n  square: {},\n  text: {color: 'black'}, // Need this to override default color in mark config\n  tick: mark.defaultTickConfig,\n  trail: {},\n\n  boxplot: {\n    size: 14,\n    extent: 1.5,\n    box: {},\n    median: {color: 'white'},\n    outliers: {},\n    rule: {},\n    ticks: null\n  },\n\n  errorbar: {\n    center: 'mean',\n    rule: true,\n    ticks: false\n  },\n\n  errorband: {\n    band: {\n      opacity: 0.3\n    },\n    borders: false\n  },\n\n  scale: defaultScaleConfig,\n\n  projection: {},\n\n  legend: defaultLegendConfig,\n  header: {titlePadding: 10, labelPadding: 10},\n  headerColumn: {},\n  headerRow: {},\n  headerFacet: {},\n\n  selection: defaultSelectionConfig,\n  style: {},\n\n  title: {},\n\n  facet: {spacing: DEFAULT_SPACING},\n  concat: {spacing: DEFAULT_SPACING},\n\n  normalizedNumberFormat: '.0%'\n};\n\n// Tableau10 color palette, copied from `vegaScale.scheme('tableau10')`\nconst tab10 = [\n  '#4c78a8',\n  '#f58518',\n  '#e45756',\n  '#72b7b2',\n  '#54a24b',\n  '#eeca3b',\n  '#b279a2',\n  '#ff9da6',\n  '#9d755d',\n  '#bab0ac'\n];\n\nexport const DEFAULT_FONT_SIZE = {\n  text: 11,\n  guideLabel: 10,\n  guideTitle: 11,\n  groupTitle: 13,\n  groupSubtitle: 12\n};\n\nexport const DEFAULT_COLOR = {\n  blue: tab10[0],\n  orange: tab10[1],\n  red: tab10[2],\n  teal: tab10[3],\n  green: tab10[4],\n  yellow: tab10[5],\n  purple: tab10[6],\n  pink: tab10[7],\n  brown: tab10[8],\n  gray0: '#000',\n  gray1: '#111',\n  gray2: '#222',\n  gray3: '#333',\n  gray4: '#444',\n  gray5: '#555',\n  gray6: '#666',\n  gray7: '#777',\n  gray8: '#888',\n  gray9: '#999',\n  gray10: '#aaa',\n  gray11: '#bbb',\n  gray12: '#ccc',\n  gray13: '#ddd',\n  gray14: '#eee',\n  gray15: '#fff'\n};\n\nexport function colorSignalConfig(color: boolean | ColorConfig = {}): Config {\n  return {\n    signals: [\n      {\n        name: 'color',\n        value: isObject(color) ? {...DEFAULT_COLOR, ...color} : DEFAULT_COLOR\n      }\n    ],\n    mark: {color: {signal: 'color.blue'}},\n    rule: {color: {signal: 'color.gray0'}},\n    text: {\n      color: {signal: 'color.gray0'}\n    },\n    style: {\n      'guide-label': {\n        fill: {signal: 'color.gray0'}\n      },\n      'guide-title': {\n        fill: {signal: 'color.gray0'}\n      },\n      'group-title': {\n        fill: {signal: 'color.gray0'}\n      },\n      'group-subtitle': {\n        fill: {signal: 'color.gray0'}\n      },\n      cell: {\n        stroke: {signal: 'color.gray8'}\n      }\n    },\n    axis: {\n      domainColor: {signal: 'color.gray13'},\n      gridColor: {signal: 'color.gray8'},\n      tickColor: {signal: 'color.gray13'}\n    },\n    range: {\n      category: [\n        {signal: 'color.blue'},\n        {signal: 'color.orange'},\n        {signal: 'color.red'},\n        {signal: 'color.teal'},\n        {signal: 'color.green'},\n        {signal: 'color.yellow'},\n        {signal: 'color.purple'},\n        {signal: 'color.pink'},\n        {signal: 'color.brown'},\n        {signal: 'color.grey8'}\n      ]\n    }\n  };\n}\n\nexport function fontSizeSignalConfig(fontSize: boolean | FontSizeConfig): Config {\n  return {\n    signals: [\n      {\n        name: 'fontSize',\n        value: isObject(fontSize) ? {...DEFAULT_FONT_SIZE, ...fontSize} : DEFAULT_FONT_SIZE\n      }\n    ],\n    text: {\n      fontSize: {signal: 'fontSize.text'}\n    },\n    style: {\n      'guide-label': {\n        fontSize: {signal: 'fontSize.guideLabel'}\n      },\n      'guide-title': {\n        fontSize: {signal: 'fontSize.guideTitle'}\n      },\n      'group-title': {\n        fontSize: {signal: 'fontSize.groupTitle'}\n      },\n      'group-subtitle': {\n        fontSize: {signal: 'fontSize.groupSubtitle'}\n      }\n    }\n  };\n}\n\nexport function fontConfig(font: string): Config {\n  return {\n    text: {font},\n    style: {\n      'guide-label': {font},\n      'guide-title': {font},\n      'group-title': {font},\n      'group-subtitle': {font}\n    }\n  };\n}\n\nfunction getAxisConfigInternal(axisConfig: AxisConfig<ExprRef | SignalRef>) {\n  const props = keys(axisConfig || {});\n  const axisConfigInternal: AxisConfig<SignalRef> = {};\n  for (const prop of props) {\n    const val = axisConfig[prop];\n    (axisConfigInternal as any)[prop] = isConditionalAxisValue<any, ExprRef | SignalRef>(val)\n      ? signalOrValueRefWithCondition<any>(val)\n      : signalRefOrValue(val);\n  }\n  return axisConfigInternal;\n}\n\nfunction getStyleConfigInternal(styleConfig: StyleConfigIndex<ExprRef | SignalRef>) {\n  const props = keys(styleConfig);\n\n  const styleConfigInternal: StyleConfigIndex<SignalRef> = {};\n  for (const prop of props) {\n    // We need to cast to cheat a bit here since styleConfig can be either mark config or axis config\n    styleConfigInternal[prop as any] = getAxisConfigInternal(styleConfig[prop] as any);\n  }\n  return styleConfigInternal;\n}\n\nconst configPropsWithExpr = [\n  ...MARK_CONFIGS,\n  ...AXIS_CONFIGS,\n  ...HEADER_CONFIGS,\n  'background',\n  'padding',\n  'legend',\n  'lineBreak',\n  'scale',\n  'style',\n  'title',\n  'view'\n] as const;\n\n/**\n * Merge specified config with default config and config for the `color` flag,\n * then replace all expressions with signals\n */\nexport function initConfig(specifiedConfig: Config = {}): Config<SignalRef> {\n  const {color, font, fontSize, selection, ...restConfig} = specifiedConfig;\n  const mergedConfig = mergeConfig(\n    {},\n    duplicate(defaultConfig),\n    font ? fontConfig(font) : {},\n    color ? colorSignalConfig(color) : {},\n    fontSize ? fontSizeSignalConfig(fontSize) : {},\n    restConfig || {}\n  );\n\n  // mergeConfig doesn't recurse and overrides object values.\n  if (selection) {\n    writeConfig(mergedConfig, 'selection', selection, true);\n  }\n\n  const outputConfig: Config<SignalRef> = omit(mergedConfig, configPropsWithExpr);\n\n  for (const prop of ['background', 'lineBreak', 'padding'] as const) {\n    if (mergedConfig[prop]) {\n      (outputConfig as any)[prop] = signalRefOrValue(mergedConfig[prop]);\n    }\n  }\n\n  for (const markConfigType of mark.MARK_CONFIGS) {\n    if (mergedConfig[markConfigType]) {\n      // FIXME: outputConfig[markConfigType] expects that types are replaced recursively but replaceExprRef only replaces one level deep\n      outputConfig[markConfigType] = replaceExprRef(mergedConfig[markConfigType]) as any;\n    }\n  }\n\n  for (const axisConfigType of AXIS_CONFIGS) {\n    if (mergedConfig[axisConfigType]) {\n      outputConfig[axisConfigType] = getAxisConfigInternal(mergedConfig[axisConfigType]);\n    }\n  }\n\n  for (const headerConfigType of HEADER_CONFIGS) {\n    if (mergedConfig[headerConfigType]) {\n      outputConfig[headerConfigType] = replaceExprRef(mergedConfig[headerConfigType]);\n    }\n  }\n\n  if (mergedConfig.legend) {\n    outputConfig.legend = replaceExprRef(mergedConfig.legend);\n  }\n\n  if (mergedConfig.scale) {\n    const {invalid, ...otherScaleConfig} = mergedConfig.scale;\n    const newScaleInvalid = replaceExprRef(invalid, {level: 1});\n    outputConfig.scale = {\n      ...replaceExprRef(otherScaleConfig),\n      ...(keys(newScaleInvalid).length > 0 ? {invalid: newScaleInvalid} : {})\n    };\n  }\n\n  if (mergedConfig.style) {\n    outputConfig.style = getStyleConfigInternal(mergedConfig.style);\n  }\n\n  if (mergedConfig.title) {\n    outputConfig.title = replaceExprRef(mergedConfig.title);\n  }\n\n  if (mergedConfig.view) {\n    outputConfig.view = replaceExprRef(mergedConfig.view);\n  }\n\n  return outputConfig;\n}\n\nconst MARK_STYLES = new Set(['view', ...PRIMITIVE_MARKS]) as ReadonlySet<'view' | Mark>;\n\nconst VL_ONLY_CONFIG_PROPERTIES: (keyof Config)[] = [\n  'color',\n  'fontSize',\n  'background', // We apply background to the spec directly.\n  'padding',\n  'facet',\n  'concat',\n  'numberFormat',\n  'numberFormatType',\n  'normalizedNumberFormat',\n  'normalizedNumberFormatType',\n  'timeFormat',\n  'countTitle',\n  'header',\n\n  'axisQuantitative',\n  'axisTemporal',\n  'axisDiscrete',\n  'axisPoint',\n\n  'axisXBand',\n  'axisXPoint',\n  'axisXDiscrete',\n  'axisXQuantitative',\n  'axisXTemporal',\n\n  'axisYBand',\n  'axisYPoint',\n  'axisYDiscrete',\n  'axisYQuantitative',\n  'axisYTemporal',\n\n  'scale',\n  'selection',\n  'overlay' as keyof Config // FIXME: Redesign and unhide this\n];\n\nconst VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = {\n  view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step'],\n  ...VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n};\n\nexport function stripAndRedirectConfig(config: Config<SignalRef>) {\n  config = duplicate(config);\n\n  for (const prop of VL_ONLY_CONFIG_PROPERTIES) {\n    delete config[prop];\n  }\n\n  if (config.axis) {\n    // delete condition axis config\n    for (const prop in config.axis) {\n      if (isConditionalAxisValue(config.axis[prop as keyof AxisConfig<SignalRef>])) {\n        delete config.axis[prop as keyof AxisConfig<SignalRef>];\n      }\n    }\n  }\n\n  if (config.legend) {\n    for (const prop of VL_ONLY_LEGEND_CONFIG) {\n      delete config.legend[prop];\n    }\n  }\n\n  // Remove Vega-Lite only generic mark config\n  if (config.mark) {\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config.mark[prop];\n    }\n\n    if (config.mark.tooltip && isObject(config.mark.tooltip)) {\n      delete config.mark.tooltip;\n    }\n  }\n\n  if (config.params) {\n    config.signals = (config.signals || []).concat(assembleParameterSignals(config.params));\n    delete config.params;\n  }\n\n  for (const markType of MARK_STYLES) {\n    // Remove Vega-Lite-only mark config\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete (config as any)[markType][prop];\n    }\n\n    // Remove Vega-Lite only mark-specific config\n    const vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n    if (vlOnlyMarkSpecificConfigs) {\n      for (const prop of vlOnlyMarkSpecificConfigs) {\n        delete (config as any)[markType][prop];\n      }\n    }\n\n    // Redirect mark config to config.style so that mark config only affect its own mark type\n    // without affecting other marks that share the same underlying Vega marks.\n    // For example, config.rect should not affect bar marks.\n    redirectConfigToStyleConfig(config, markType);\n  }\n\n  for (const m of getAllCompositeMarks()) {\n    // Clean up the composite mark config as we don't need them in the output specs anymore\n    delete (config as any)[m];\n  }\n\n  redirectTitleConfig(config);\n\n  // Remove empty config objects.\n  for (const prop in config) {\n    // @ts-ignore\n    if (isObject(config[prop]) && isEmpty(config[prop])) {\n      // @ts-ignore\n      delete config[prop];\n    }\n  }\n\n  return isEmpty(config) ? undefined : config;\n}\n\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config: Config<SignalRef>) {\n  const {titleMarkConfig, subtitleMarkConfig, subtitle} = extractTitleConfig(config.title);\n\n  // set config.style if title/subtitleMarkConfig is not an empty object\n  if (!isEmpty(titleMarkConfig)) {\n    config.style['group-title'] = {\n      ...config.style['group-title'],\n      ...titleMarkConfig // config.title has higher precedence than config.style.group-title in Vega\n    };\n  }\n  if (!isEmpty(subtitleMarkConfig)) {\n    config.style['group-subtitle'] = {\n      ...config.style['group-subtitle'],\n      ...subtitleMarkConfig\n    };\n  }\n\n  // subtitle part can stay in config.title since header titles do not use subtitle\n  if (!isEmpty(subtitle)) {\n    config.title = subtitle;\n  } else {\n    delete config.title;\n  }\n}\n\nfunction redirectConfigToStyleConfig(\n  config: Config<SignalRef>,\n  prop: Mark | 'view' | string, // string = composite mark\n  toProp?: string,\n  compositeMarkPart?: string\n) {\n  const propConfig: MarkConfig<SignalRef> = compositeMarkPart\n    ? (config as any)[prop][compositeMarkPart]\n    : config[prop as keyof Config<any>];\n\n  if (prop === 'view') {\n    toProp = 'cell'; // View's default style is \"cell\"\n  }\n\n  const style: MarkConfig<SignalRef> = {\n    ...propConfig,\n    ...(config.style[toProp ?? prop] as MarkConfig<SignalRef>)\n  };\n\n  // set config.style if it is not an empty object\n  if (!isEmpty(style)) {\n    config.style[toProp ?? prop] = style;\n  }\n\n  if (!compositeMarkPart) {\n    // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n    delete config[prop as keyof Config<any>];\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}