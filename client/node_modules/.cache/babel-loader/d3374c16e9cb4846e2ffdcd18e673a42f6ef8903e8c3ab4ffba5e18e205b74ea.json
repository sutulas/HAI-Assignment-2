{"ast":null,"code":"import { isObject } from 'vega-util';\nexport const SELECTION_ID = '_vgsid_';\nexport const defaultConfig = {\n  point: {\n    on: 'click',\n    fields: [SELECTION_ID],\n    toggle: 'event.shiftKey',\n    resolve: 'global',\n    clear: 'dblclick'\n  },\n  interval: {\n    on: '[pointerdown, window:pointerup] > window:pointermove!',\n    encodings: ['x', 'y'],\n    translate: '[pointerdown, window:pointerup] > window:pointermove!',\n    zoom: 'wheel!',\n    mark: {\n      fill: '#333',\n      fillOpacity: 0.125,\n      stroke: 'white'\n    },\n    resolve: 'global',\n    clear: 'dblclick'\n  }\n};\nexport function isLegendBinding(bind) {\n  return bind === 'legend' || !!bind?.legend;\n}\nexport function isLegendStreamBinding(bind) {\n  return isLegendBinding(bind) && isObject(bind);\n}\nexport function isSelectionParameter(param) {\n  return !!param?.['select'];\n}","map":{"version":3,"names":["isObject","SELECTION_ID","defaultConfig","point","on","fields","toggle","resolve","clear","interval","encodings","translate","zoom","mark","fill","fillOpacity","stroke","isLegendBinding","bind","legend","isLegendStreamBinding","isSelectionParameter","param"],"sources":["C:\\Users\\sutul\\node_modules\\vega-lite\\src\\selection.ts"],"sourcesContent":["import type {Binding, Color, Cursor, Stream, Vector2} from 'vega';\nimport {isObject} from 'vega-util';\nimport {SingleDefUnitChannel} from './channel';\nimport {FieldName, PrimitiveValue} from './channeldef';\nimport {DateTime} from './datetime';\nimport {ParameterName} from './parameter';\nimport {Dict} from './util';\n\nexport const SELECTION_ID = '_vgsid_';\nexport type SelectionType = 'point' | 'interval';\nexport type SelectionResolution = 'global' | 'union' | 'intersect';\n\nexport type SelectionInit = PrimitiveValue | DateTime;\nexport type SelectionInitInterval = Vector2<boolean> | Vector2<number> | Vector2<string> | Vector2<DateTime>;\n\nexport type SelectionInitMapping = Dict<SelectionInit>;\nexport type SelectionInitIntervalMapping = Dict<SelectionInitInterval>;\n\nexport type LegendStreamBinding = {legend: string | Stream};\nexport type LegendBinding = 'legend' | LegendStreamBinding;\n\nexport interface BaseSelectionConfig<T extends SelectionType = SelectionType> {\n  /**\n   * Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n   *\n   * - `\"point\"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n   * - `\"interval\"` -- to select a continuous range of data values on `drag`.\n   */\n  type: T;\n\n  /**\n   * Clears the selection, emptying it of all values. This property can be a\n   * [Event Stream](https://vega.github.io/vega/docs/event-streams/) or `false` to disable clear.\n   *\n   * __Default value:__ `dblclick`.\n   *\n   * __See also:__ [`clear` examples ](https://vega.github.io/vega-lite/docs/selection.html#clear) in the documentation.\n   */\n  clear?: Stream | string | boolean;\n\n  /**\n   * A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection.\n   * For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n   *\n   * __See also:__ [`on` examples](https://vega.github.io/vega-lite/docs/selection.html#on) in the documentation.\n   */\n  on?: Stream | string;\n\n  /**\n   * With layered and multi-view displays, a strategy that determines how\n   * selections' data queries are resolved when applied in a filter transform,\n   * conditional encoding rule, or scale domain.\n   *\n   * One of:\n   * - `\"global\"` -- only one brush exists for the entire SPLOM. When the user begins to drag, any previous brushes are cleared, and a new one is constructed.\n   * - `\"union\"` -- each cell contains its own brush, and points are highlighted if they lie within _any_ of these individual brushes.\n   * - `\"intersect\"` -- each cell contains its own brush, and points are highlighted only if they fall within _all_ of these individual brushes.\n   *\n   * __Default value:__ `global`.\n   *\n   * __See also:__ [`resolve` examples](https://vega.github.io/vega-lite/docs/selection.html#resolve) in the documentation.\n   */\n  resolve?: SelectionResolution;\n\n  // TODO(https://github.com/vega/vega-lite/issues/2596).\n  // predicate?: string;\n  // domain?: SelectionDomain;\n\n  /**\n   * An array of encoding channels. The corresponding data field values\n   * must match for a data tuple to fall within the selection.\n   *\n   * __See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.\n   */\n  encodings?: SingleDefUnitChannel[];\n\n  /**\n   * An array of field names whose values must match for a data tuple to\n   * fall within the selection.\n   *\n   * __See also:__ The [projection with `encodings` and `fields` section](https://vega.github.io/vega-lite/docs/selection.html#project) in the documentation.\n   */\n  fields?: FieldName[];\n}\n\nexport interface PointSelectionConfig extends BaseSelectionConfig<'point'> {\n  /**\n   * Controls whether data values should be toggled (inserted or removed from a point selection)\n   * or only ever inserted into point selections.\n   *\n   * One of:\n   * - `true` -- the default behavior, which corresponds to `\"event.shiftKey\"`.  As a result, data values are toggled when the user interacts with the shift-key pressed.\n   * - `false` -- disables toggling behaviour; the selection will only ever contain a single data value corresponding to the most recent interaction.\n   * - A [Vega expression](https://vega.github.io/vega/docs/expressions/) which is re-evaluated as the user interacts. If the expression evaluates to `true`, the data value is toggled into or out of the point selection. If the expression evaluates to `false`, the point selection is first cleared, and the data value is then inserted. For example, setting the value to the Vega expression `\"true\"` will toggle data values\n   * without the user pressing the shift-key.\n   *\n   * __Default value:__ `true`\n   *\n   * __See also:__ [`toggle` examples](https://vega.github.io/vega-lite/docs/selection.html#toggle) in the documentation.\n   */\n  toggle?: string | boolean;\n\n  /**\n   * When true, an invisible voronoi diagram is computed to accelerate discrete\n   * selection. The data value _nearest_ the mouse cursor is added to the selection.\n   *\n   * __Default value:__ `false`, which means that data values must be interacted with directly (e.g., clicked on) to be added to the selection.\n   *\n   * __See also:__ [`nearest` examples](https://vega.github.io/vega-lite/docs/selection.html#nearest) documentation.\n   */\n  nearest?: boolean;\n}\n\n// Similar to BaseMarkConfig but the field documentations are specificly for an interval mark.\nexport interface BrushConfig {\n  /**\n   * The fill color of the interval mark.\n   *\n   * __Default value:__ `\"#333333\"`\n   *\n   */\n  fill?: Color;\n\n  /**\n   * The fill opacity of the interval mark (a value between `0` and `1`).\n   *\n   * __Default value:__ `0.125`\n   */\n  fillOpacity?: number;\n\n  /**\n   * The stroke color of the interval mark.\n   *\n   * __Default value:__ `\"#ffffff\"`\n   */\n  stroke?: Color;\n\n  /**\n   * The stroke opacity of the interval mark (a value between `0` and `1`).\n   */\n  strokeOpacity?: number;\n\n  /**\n   * The stroke width of the interval mark.\n   */\n  strokeWidth?: number;\n\n  /**\n   * An array of alternating stroke and space lengths, for creating dashed or dotted lines.\n   */\n  strokeDash?: number[];\n\n  /**\n   * The offset (in pixels) with which to begin drawing the stroke dash array.\n   */\n  strokeDashOffset?: number;\n\n  /**\n   * The mouse cursor used over the interval mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used.\n   */\n  cursor?: Cursor;\n}\n\nexport interface IntervalSelectionConfig extends BaseSelectionConfig<'interval'> {\n  /**\n   * When truthy, allows a user to interactively move an interval selection\n   * back-and-forth. Can be `true`, `false` (to disable panning), or a\n   * [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/)\n   * which must include a start and end event to trigger continuous panning.\n   * Discrete panning (e.g., pressing the left/right arrow keys) will be supported in future versions.\n   *\n   * __Default value:__ `true`, which corresponds to `[pointerdown, window:pointerup] > window:pointermove!`.\n   * This default allows users to clicks and drags within an interval selection to reposition it.\n   *\n   * __See also:__ [`translate` examples](https://vega.github.io/vega-lite/docs/selection.html#translate) in the documentation.\n   */\n  translate?: string | boolean;\n\n  /**\n   * When truthy, allows a user to interactively resize an interval selection.\n   * Can be `true`, `false` (to disable zooming), or a [Vega event stream\n   * definition](https://vega.github.io/vega/docs/event-streams/). Currently,\n   * only `wheel` events are supported,\n   * but custom event streams can still be used to specify filters, debouncing, and throttling.\n   * Future versions will expand the set of events that can trigger this transformation.\n   *\n   * __Default value:__ `true`, which corresponds to `wheel!`. This default allows users to use the mouse wheel to resize an interval selection.\n   *\n   * __See also:__ [`zoom` examples](https://vega.github.io/vega-lite/docs/selection.html#zoom) in the documentation.\n   */\n  zoom?: string | boolean;\n\n  /**\n   * An interval selection also adds a rectangle mark to depict the\n   * extents of the interval. The `mark` property can be used to customize the\n   * appearance of the mark.\n   *\n   * __See also:__ [`mark` examples](https://vega.github.io/vega-lite/docs/selection.html#mark) in the documentation.\n   */\n  mark?: BrushConfig;\n}\n\nexport interface SelectionParameter<T extends SelectionType = SelectionType> {\n  /**\n   * Required. A unique name for the selection parameter. Selection names should be valid JavaScript identifiers: they should contain only alphanumeric characters (or \"$\", or \"_\") and may not start with a digit. Reserved keywords that may not be used as parameter names are \"datum\", \"event\", \"item\", and \"parent\".\n   */\n  name: ParameterName;\n\n  /**\n   * Determines the default event processing and data query for the selection. Vega-Lite currently supports two selection types:\n   *\n   * - `\"point\"` -- to select multiple discrete data values; the first value is selected on `click` and additional values toggled on shift-click.\n   * - `\"interval\"` -- to select a continuous range of data values on `drag`.\n   */\n  select: T | (T extends 'point' ? PointSelectionConfig : T extends 'interval' ? IntervalSelectionConfig : never);\n\n  /**\n   * Initialize the selection with a mapping between [projected channels or field names](https://vega.github.io/vega-lite/docs/selection.html#project) and initial values.\n   *\n   * __See also:__ [`init`](https://vega.github.io/vega-lite/docs/value.html) documentation.\n   */\n  value?: T extends 'point'\n    ? SelectionInit | SelectionInitMapping[]\n    : T extends 'interval'\n      ? SelectionInitIntervalMapping\n      : never;\n\n  /**\n   * When set, a selection is populated by input elements (also known as dynamic query widgets)\n   * or by interacting with the corresponding legend. Direct manipulation interaction is disabled by default;\n   * to re-enable it, set the selection's [`on`](https://vega.github.io/vega-lite/docs/selection.html#common-selection-properties) property.\n   *\n   * Legend bindings are restricted to selections that only specify a single field or encoding.\n   *\n   * Query widget binding takes the form of Vega's [input element binding definition](https://vega.github.io/vega/docs/signals/#bind)\n   * or can be a mapping between projected field/encodings and binding definitions.\n   *\n   * __See also:__ [`bind`](https://vega.github.io/vega-lite/docs/bind.html) documentation.\n   */\n  bind?: T extends 'point'\n    ? Binding | Record<string, Binding> | LegendBinding\n    : T extends 'interval'\n      ? 'scales'\n      : never;\n}\n\nexport type TopLevelSelectionParameter = SelectionParameter & {\n  /**\n   * By default, top-level selections are applied to every view in the visualization.\n   * If this property is specified, selections will only be applied to views with the given names.\n   */\n  views?: string[];\n};\n\nexport type ParameterExtent =\n  | {\n      /**\n       * The name of a parameter.\n       */\n      param: ParameterName;\n\n      /**\n       * If a selection parameter is specified, the field name to extract selected values for\n       * when the selection is [projected](https://vega.github.io/vega-lite/docs/selection.html#project) over multiple fields or encodings.\n       */\n      field?: FieldName;\n    }\n  | {\n      /**\n       * The name of a parameter.\n       */\n      param: ParameterName;\n\n      /**\n       * If a selection parameter is specified, the encoding channel to extract selected values for\n       * when a selection is [projected](https://vega.github.io/vega-lite/docs/selection.html#project) over multiple fields or encodings.\n       */\n      encoding?: SingleDefUnitChannel;\n    };\n\nexport type PointSelectionConfigWithoutType = Omit<PointSelectionConfig, 'type'>;\n\nexport type IntervalSelectionConfigWithoutType = Omit<IntervalSelectionConfig, 'type'>;\n\nexport interface SelectionConfig {\n  /**\n   * The default definition for a [`point`](https://vega.github.io/vega-lite/docs/parameter.html#select) selection. All properties and transformations\n   *  for a point selection definition (except `type`) may be specified here.\n   *\n   * For instance, setting `point` to `{\"on\": \"dblclick\"}` populates point selections on double-click by default.\n   */\n  point?: PointSelectionConfigWithoutType;\n\n  /**\n   * The default definition for an [`interval`](https://vega.github.io/vega-lite/docs/parameter.html#select) selection. All properties and transformations\n   * for an interval selection definition (except `type`) may be specified here.\n   *\n   * For instance, setting `interval` to `{\"translate\": false}` disables the ability to move\n   * interval selections by default.\n   */\n  interval?: IntervalSelectionConfigWithoutType;\n}\n\nexport const defaultConfig: SelectionConfig = {\n  point: {\n    on: 'click',\n    fields: [SELECTION_ID],\n    toggle: 'event.shiftKey',\n    resolve: 'global',\n    clear: 'dblclick'\n  },\n  interval: {\n    on: '[pointerdown, window:pointerup] > window:pointermove!',\n    encodings: ['x', 'y'],\n    translate: '[pointerdown, window:pointerup] > window:pointermove!',\n    zoom: 'wheel!',\n    mark: {fill: '#333', fillOpacity: 0.125, stroke: 'white'},\n    resolve: 'global',\n    clear: 'dblclick'\n  }\n};\n\nexport function isLegendBinding(bind: any): bind is LegendBinding {\n  return bind === 'legend' || !!bind?.legend;\n}\n\nexport function isLegendStreamBinding(bind: any): bind is LegendStreamBinding {\n  return isLegendBinding(bind) && isObject(bind);\n}\n\nexport function isSelectionParameter(param: any): param is SelectionParameter {\n  return !!param?.['select'];\n}\n"],"mappings":"AACA,SAAQA,QAAQ,QAAO,WAAW;AAOlC,OAAO,MAAMC,YAAY,GAAG,SAAS;AAuSrC,OAAO,MAAMC,aAAa,GAAoB;EAC5CC,KAAK,EAAE;IACLC,EAAE,EAAE,OAAO;IACXC,MAAM,EAAE,CAACJ,YAAY,CAAC;IACtBK,MAAM,EAAE,gBAAgB;IACxBC,OAAO,EAAE,QAAQ;IACjBC,KAAK,EAAE;GACR;EACDC,QAAQ,EAAE;IACRL,EAAE,EAAE,uDAAuD;IAC3DM,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;IACrBC,SAAS,EAAE,uDAAuD;IAClEC,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAE;MAACC,IAAI,EAAE,MAAM;MAAEC,WAAW,EAAE,KAAK;MAAEC,MAAM,EAAE;IAAO,CAAC;IACzDT,OAAO,EAAE,QAAQ;IACjBC,KAAK,EAAE;;CAEV;AAED,OAAM,SAAUS,eAAeA,CAACC,IAAS;EACvC,OAAOA,IAAI,KAAK,QAAQ,IAAI,CAAC,CAACA,IAAI,EAAEC,MAAM;AAC5C;AAEA,OAAM,SAAUC,qBAAqBA,CAACF,IAAS;EAC7C,OAAOD,eAAe,CAACC,IAAI,CAAC,IAAIlB,QAAQ,CAACkB,IAAI,CAAC;AAChD;AAEA,OAAM,SAAUG,oBAAoBA,CAACC,KAAU;EAC7C,OAAO,CAAC,CAACA,KAAK,GAAG,QAAQ,CAAC;AAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}